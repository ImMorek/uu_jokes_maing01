/*!
 * Copyright (c) 2019 Unicorn a.s.
 * All rights reserved.
 */
!function(t,e){
"object"==typeof exports&&"object"==typeof module?module.exports=e(require("uu_appg01_core"),require("module")):"function"==typeof define&&define.amd?define("uu_appg01_oidc",["uu_appg01_core","module"],e):"object"==typeof exports?exports.uu_appg01_oidc=e(require("uu_appg01_core"),require("module")):(t.UuApp=t.UuApp||{},
t.UuApp.Oidc=e(t.UuApp,t[void 0]))}(window,(function(t,e){return function(t){function e(e){for(var r,o,i=e[0],a=e[1],c=0,s=[];c<i.length;c++)o=i[c],
Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&s.push(n[o][0]),n[o]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r]);for(u&&u(e);s.length;)s.shift()()}var r={},n={1:0}
;function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(t){var e=[],r=n[t];if(0!==r)if(r)e.push(r[2]);else{
var i=new Promise((function(e,o){r=n[t]=[e,o]}));e.push(r[2]=i);var a,c=document.createElement("script");c.charset="utf-8",c.timeout=120,o.nc&&c.setAttribute("nonce",o.nc),c.src=function(t){
return o.p+"chunks/uu_appg01_oidc/"+t+"-0d730b3f530920ca7531.min.js"}(t),0!==c.src.indexOf(window.location.origin+"/")&&(c.crossOrigin="anonymous");var u=new Error;a=function(e){
c.onerror=c.onload=null,clearTimeout(s);var r=n[t];if(0!==r){if(r){var o=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",
u.name="ChunkLoadError",u.type=o,u.request=i,r[1](u)}n[t]=void 0}};var s=setTimeout((function(){a({type:"timeout",target:c})}),12e4);c.onerror=c.onload=a,document.head.appendChild(c)}
return Promise.all(e)},o.m=t,o.c=r,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){
"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),
8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),
2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t}
;return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o.oe=function(t){throw console.error(t),t}
;var i=window.__webpack_jsonp_uu_appg01_oidc_3_7_5_uu_appg01_oidc=window.__webpack_jsonp_uu_appg01_oidc_3_7_5_uu_appg01_oidc||[],a=i.push.bind(i);i.push=e,i=i.slice()
;for(var c=0;c<i.length;c++)e(i[c]);var u=a;return o(o.s=19)}([function(t,e,r){t.exports=r(4).Authentication},function(t,e,r){t.exports=r(4).Util},function(t,e,r){t.exports=r(4).AppClient
},function(t,e,r){t.exports=r(4).Logging},function(e,r){e.exports=t},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){
return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */o=function(){return t}
;var t={},e=Object.prototype,r=e.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value
},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,
enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function f(t,e,r,n){
var o=e&&e.prototype instanceof d?e:d,a=Object.create(o.prototype),c=new P(n||[]);return i(a,"_invoke",{value:k(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{
type:"throw",arg:t}}}t.wrap=f;var p={};function d(){}function y(){}function v(){}var g={};l(g,c,(function(){return this}));var m=Object.getPrototypeOf,_=m&&m(m(L([])));_&&_!==e&&r.call(_,c)&&(g=_)
;var b=v.prototype=d.prototype=Object.create(g);function w(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){var o;i(this,"_invoke",{
value:function(i,a){function c(){return new e((function(o,c){!function o(i,a,c,u){var s=h(t[i],t,a);if("throw"!==s.type){var l=s.arg,f=l.value
;return f&&"object"==n(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(f).then((function(t){l.value=t,c(l)}),(function(t){
return o("throw",t,c,u)}))}u(s.arg)}(i,a,o,c)}))}return o=o?o.then(c,c):c()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){
if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=S(a,r);if(c){
if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)
}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=h(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}
"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",
e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg)
;if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),
e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),
2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],
t.forEach(E,this),this.reset(!0)}function L(t){if(t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){
for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=v,
i(b,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:y,configurable:!0}),y.displayName=l(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){
var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,
l(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,
t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),l(b,s,"Generator"),
l(b,c,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){
for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,
this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),
!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg
;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}
for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc")
;if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{
if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){
var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null)
;var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg
;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},
finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),p}},catch:function(t){
for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},
delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function i(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){
return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function a(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){
i(a,n,o,c,u,"next",t)}function u(t){i(a,n,o,c,u,"throw",t)}c(void 0)}))}}function c(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,
"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default")
;if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===n(a)?a:String(a)),o)}var i,a}
var u=r(1),s=u.Config,l=u.LruCache,f=u.Base64,h=r(2),p=h.AppClient,d=h.PerflogHandler,y=h.RemoteErrorHandler,v=h.TransformParametersHandler,g=h.ApplicationError,m=r(3).LoggerFactory,_=r(9),b=r(7),w=[d,y,v],x=new l({
maxSize:256,maxAge:36e5,localStorageKey:"uu_app_oidc_cache_client_id"}),k=m.get("uuapp.oidc.ClientCredentialsProvider"),S=Math.random().toString(16).substring(2,10),E=function(){function t(){
!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n,i,u;return e=t,r=null,n=[{key:"getClientId",value:(u=a(o().mark((function t(e){
var r,n,i,a,c;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=f.encode("".concat(b.appBaseUri,":").concat(e)),
n=x.get(r)||s.getString("".concat("uu_app_oidc_providers_").concat(e).concat("_client_id"))){t.next=22;break}return i=null,t.prev=4,a={serviceName:e},c={interceptors:w},t.next=9,
p.get("".concat(b.appBaseUri,"oidc/getClientId"),a,c);case 9:i=t.sent,n=i.data.clientId,t.next=21;break;case 13:if(t.prev=13,t.t0=t.catch(4),!(t.t0 instanceof g&&404===t.t0.status)){t.next=20;break}
k.warn('Backend does not provide "oidc/getClientId" endpoint and custom configuration of clientId is not available. Using unregistered client.'),
n=s.get("".concat("uu_app_oidc_providers_").concat(e).concat("_unregistered_client_id"))||"".concat("uu-oidc:unregistered-client:").concat(S),t.next=21;break;case 20:throw t.t0;case 21:x.set(r,n)
;case 22:return this._clientIds[r]=n,t.abrupt("return",n);case 24:case"end":return t.stop()}}),t,this,[[4,13]])}))),function(t){return u.apply(this,arguments)})},{key:"getClientIdSync",
value:function(t){var e=f.encode("".concat(b.appBaseUri,":").concat(t)),r=this._clientIds[e]
;if(!r)throw new _("Asynchronous method getClientId or getClientCredentials must be invoked prior to synchronous invocation");return r}},{key:"getClientCredentials",value:(i=a(o().mark((function t(e){
var r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getClientId(e);case 2:return r=t.sent,t.abrupt("return",{client_id:r,client_secret:null});case 4:case"end":
return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"getClientCredentialsSync",value:function(t){return{client_id:this.getClientIdSync(t),client_secret:null}}}],
r&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();E._clientIds={},t.exports=E},function(t,e,r){"use strict"
;var n=["error","error_description","uu_oidc_error_id","uu_oidc_error_code"];function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t
}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{}
;var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t)
;for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function a(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */a=function(){return t}
;var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value
},i="function"==typeof Symbol?Symbol:{},c=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,
enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function f(t,e,r,o){
var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:k(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{
type:"throw",arg:t}}}t.wrap=f;var p={};function d(){}function y(){}function v(){}var g={};l(g,c,(function(){return this}));var m=Object.getPrototypeOf,_=m&&m(m(L([])));_&&_!==e&&r.call(_,c)&&(g=_)
;var b=v.prototype=d.prototype=Object.create(g);function w(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){var i;n(this,"_invoke",{
value:function(n,a){function c(){return new e((function(i,c){!function n(i,a,c,u){var s=h(t[i],t,a);if("throw"!==s.type){var l=s.arg,f=l.value
;return f&&"object"==o(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,c,u)}),(function(t){n("throw",t,c,u)})):e.resolve(f).then((function(t){l.value=t,c(l)}),(function(t){
return n("throw",t,c,u)}))}u(s.arg)}(n,a,i,c)}))}return i=i?i.then(c,c):c()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){
if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=S(a,r);if(c){
if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)
}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=h(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}
"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",
e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg)
;if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),
e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),
2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],
t.forEach(E,this),this.reset(!0)}function L(t){if(t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){
for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=v,
n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:y,configurable:!0}),y.displayName=l(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){
var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,
l(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,
t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),l(b,s,"Generator"),
l(b,c,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){
for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,
this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),
!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg
;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}
for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc")
;if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{
if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){
var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null)
;var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg
;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},
finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),p}},catch:function(t){
for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},
delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function c(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){
return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function u(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){
c(i,n,o,a,u,"next",t)}function u(t){c(i,n,o,a,u,"throw",t)}a(void 0)}))}}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,
"value"in n&&(n.writable=!0),Object.defineProperty(t,(i=n.key,a=void 0,a=function(t,e){if("object"!==o(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default")
;if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===o(a)?a:String(a)),n)}var i,a}
var l=r(7),f=r(35),h=r(36),p=r(37),d=r(9),y=r(11),v=r(5),g=r(0).AuthenticationError,m=r(1),_=m.Config,b=m.Base64,w=m.BaseError,x=r(3).LoggerFactory,k="uu_app_oidc_providers_",S={enabled:{oidcg01:!0,
oidcg02:!0},width:{oidcg01:599,oidcg02:655},height:{oidcg01:600,oidcg02:875}},E={type:{oidcg01:"iframe",oidcg02:"iframe"},popupWidth:{oidcg01:599,oidcg02:655},popupHeight:{oidcg01:600,oidcg02:875}
},O=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._oauthClient=e,this._serviceName=r,
this._defaultRedirectUri=n;var o=_.getBoolean(k+r+"_login_popup_enabled");null==o?(o=S.enabled[r],this._popupEnabled=null==o||o):this._popupEnabled=o,
this._defaultAcrValues=_.getString("uu_app_oidc_requested_acr_values",!1),this._defaultMaxAge=_.getNumber("uu_app_oidc_max_authentication_age",!1),
this._logger=x.get("uuapp.oidc.internal."+r+"."+this.constructor.name),this._checkSessionIframe=null,this._loadCheckSessionIframePromise=null,this._runningCheckSessionPromise=null,
this._runningCheckSessionResolve=null}var e,r,o,c,m,O;return e=t,r=[{key:"getResponseType",value:function(){throw new Error("AbstractFlow.getResponseType must be implemented on child class.")}},{
key:"createAuthState",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r={
r:Math.random().toString(32).substr(2),appUri:location.pathname+location.search+(location.hash.length>1?location.hash:""),authCtx:t,usePopup:e};return r}},{key:"restoreSession",value:function(t){
var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.authenticate(t,e)}},{key:"authenticate",value:function(t){
var e,r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=new Promise(function(){var i=u(a().mark((function i(c,u){var s,l,y,g,m,_,x,k,S,E,O,P,L,T,j,A,C
;return a().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,l=(s=t||{}).acrValues,y=s.maxAge,g=s.prompt,m=s.language,_=s.usePopup,x=s.authenticationContext,k=s.loginHint,
S=s.noIframe,null==l&&(l=r._defaultAcrValues),null==y&&(y=r._defaultMaxAge),null==_&&(_=!0),_=_&&r._popupEnabled,"none"!==g){i.next=15;break}return i.next=9,v.getClientId(r._serviceName);case 9:
return O=i.sent,i.next=12,r._oauthClient.getAuthorizationUri(r.getResponseType(),r._defaultRedirectUri,O,l,n);case 12:E=i.sent,i.next=31;break;case 15:i.prev=15,O=v.getClientIdSync(r._serviceName),
i.next=23;break;case 19:throw i.prev=19,i.t0=i.catch(15),i.t0 instanceof d&&(r._logger.debug("Trying to reload client id on background."),v.getClientId(r._serviceName)),
new w("Unable to get client credentials for service ".concat(r._serviceName,": ").concat(i.t0.message),i.t0);case 23:i.prev=23,
E=r._oauthClient.getAuthorizationUriSync(r.getResponseType(),r._defaultRedirectUri,O,l,n),i.next=31;break;case 27:throw i.prev=27,i.t1=i.catch(23),
i.t1 instanceof d&&(r._logger.debug("Trying to reload service metadata on background."),r._oauthClient.getMetadata()),
new w("Unable to get metadata of service ".concat(r._serviceName,": ").concat(i.t1.message),i.t1);case 31:return P=Math.random().toString(32).substr(2),
L=b.urlSafeEncode(JSON.stringify(r.createAuthState(x,_))),T=r._addUriParams(E,{max_age:y,login_hint:k,prompt:g,state:L,nonce:P,language:m}),j="none"!==g||S?_?f:p:h,
r._logger.debug("Invoking authorization request: ".concat(T)),A=r.sendRequest(T,j),o?o.uiComponent=A.uiComponent:e=A.uiComponent,i.next=40,A;case 40:C=i.sent,c({authResponse:C,state:L,nonce:P,scope:n,
acrValues:l,maxAge:y,clientId:O}),i.next=47;break;case 44:i.prev=44,i.t2=i.catch(0),u(i.t2);case 47:case"end":return i.stop()}}),i,null,[[0,44],[15,19],[23,27]])})));return function(t,e){
return i.apply(this,arguments)}}());return e&&(o.uiComponent=e),o}},{key:"getAuthResponseFromCallback",value:function(t){
throw new Error("AbstractFlow.getAuthResponseFromCallback must be implemented on child class.")}},{key:"isCheckSessionSupported",value:(O=u(a().mark((function t(){return a().wrap((function(t){
for(;;)switch(t.prev=t.next){case 0:return null==this._loadCheckSessionIframePromise&&(this._loadCheckSessionIframePromise=this._loadCheckSessionIframe()),t.next=3,this._loadCheckSessionIframePromise
;case 3:return t.abrupt("return",!!this._checkSessionIframe);case 4:case"end":return t.stop()}}),t,this)}))),function(){return O.apply(this,arguments)})},{key:"checkSession",value:function(t){
var e=this;if(this._runningCheckSessionPromise)return this._runningCheckSessionPromise;var r=null,n=new Promise(function(){var n=u(a().mark((function n(o,i){return a().wrap((function(n){
for(;;)switch(n.prev=n.next){case 0:return r=o,n.next=3,e.isCheckSessionSupported();case 3:if(n.sent){n.next=7;break}return e._runningCheckSessionResolve=null,e._runningCheckSessionPromise=null,
n.abrupt("return",i(new w("Check session is not supported.")));case 7:e._logger.debug("Querying session state change from check session iframe. Query: ".concat(t)),
e._checkSessionIframe.contentWindow.postMessage(t,e._iframeTrustedOrigin);case 9:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}())
;return this._runningCheckSessionResolve=r,this._runningCheckSessionPromise=n,n}},{key:"refreshSession",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null
;return this.authenticate(t,e)}},{key:"getCallToken",value:(m=u(a().mark((function t(e){var r,n,o,i,c,u,s=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:
return r=s.length>1&&void 0!==s[1]?s[1]:null,t.next=3,this.authenticate(e,r);case 3:return n=t.sent,o=n.idToken,i=n.accessToken,c=n.claims,u=1e3*c.exp,t.abrupt("return",{idToken:o,accessToken:i,
expireAt:u});case 9:case"end":return t.stop()}}),t,this)}))),function(t){return m.apply(this,arguments)})},{key:"getEndSessionUri",value:function(){
throw new Error("AbstractFlow.getEndSessionUri must be implemented on child class.")}},{key:"isEndSessionIdTokenHintRequired",value:function(){return!0}},{key:"endSession",value:function(t){var e=this
;return new Promise(function(){var r=u(a().mark((function r(n,o){var i,c,u,s,d,y,v,g,m,b;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=e.getEndSessionUri(),c=null,
!(u=null==(u=_.getBoolean(k+t.getServiceName()+"_logout_token_hint_enabled"))||u)||!e.isEndSessionIdTokenHintRequired()){r.next=23;break}
if(s="".concat(k).concat(t.getServiceName(),"_default_call_token_scope_mode"),"none"!==(_.getString(s)||"baseUri")){r.next=11;break}c=t._idToken,r.next=23;break;case 11:return r.prev=11,
e._logger.debug("Obtaining token to be used as id_token_hint for end session request."),d={callTokenType:"idToken",excludeAuthenticationType:!0},r.next=16,t.getCallToken(i,d);case 16:c=r.sent,
r.next=23;break;case 19:r.prev=19,r.t0=r.catch(11),e._logger.warn("Unable to provide id_token_hint for end session request, using standard token.",r.t0),c=t._idToken;case 23:
!c&&e.isEndSessionIdTokenHintRequired()||(y=(y=_.getString("uu_app_oidc_post_logout_redirect_uri"))?l.toFullAppUrl(y):e._defaultRedirectUri,i+=i.includes("?")?"&":"?",
i+="post_logout_redirect_uri="+encodeURIComponent(y),c&&(i+="&id_token_hint="+encodeURIComponent(c))),v=_.getString(k+e._serviceName+"_logout_type")||E.type[e._serviceName],
g=_.getNumber(k+e._serviceName+"_logout_popup_width")||E.popupWidth[e._serviceName]||655,m=_.getNumber(k+e._serviceName+"_logout_popup_height")||E.popupHeight[e._serviceName]||875,
b="main"===v?p:"popup"===v?f:h,e._logger.debug("Invoking end session request: ".concat(i)),new b({width:g,height:m,url:i,onResult:function(t){t instanceof Error?o(t):n()}}).render();case 30:case"end":
return r.stop()}}),r,null,[[11,19]])})));return function(t,e){return r.apply(this,arguments)}}())}},{key:"sendRequest",value:function(t){
var e,r=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getAuthResponseFromCallback.bind(this),c=new Promise((function(c,u){
var s=_.getNumber(k+r._serviceName+"_login_popup_width")||S.width[r._serviceName]||655,l=_.getNumber(k+r._serviceName+"_login_popup_height")||S.height[r._serviceName]||875;(e=new o({width:s,height:l,
url:t,onResult:function(t){if(t instanceof Error)return u(t);if(!1===t)return u(new g("User refused to log in."));if(t===f.ERROR_POPUP_BLOCKED)return u(new g("Login failed due to popup blocking."))
;var e=a(t);if(e.error){var r,o=e.error,s=e.error_description,l=e.uu_oidc_error_id,h=e.uu_oidc_error_code,p=i(e,n),d=h||o,v=s||"Authentication error: "+o
;(r=d&&d.match(/(interaction|login|account_selection|consent)_required/i)||v&&v.match(/interaction required/i)?new y(v):new g(v)).code=d,l&&(r.id=l),Object.assign(r,p),u(r)}else c(e)}})).render()}))
;return c.uiComponent=e,c}},{key:"_loadCheckSessionIframe",value:(c=u(a().mark((function t(){var e=this;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:
return t.abrupt("return",new Promise(function(){var t=u(a().mark((function t(r){var n,o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.domReady;case 2:
return t.next=4,e._oauthClient.getCheckSessionIframeUri();case 4:(n=t.sent)?(e._logger.debug("Creating iframe with check_session_iframe endpoint URL: ".concat(n)),
(o=document.createElement("iframe")).style.cssText="position: absolute;top: -300px; left: -300px; width: 200px; height: 200px; opacity: 0;",o.tabIndex="-1",o.onload=function(){
e._iframeTrustedOrigin=n.match(/^(https?:\/\/[^\/]+).*$/)[1]||null,e._checkSessionIframe=o,window.addEventListener("message",e._onMessage.bind(e)),r()},o.src=n,
document.body.appendChild(o)):(e._logger.warn("The OpenID Connect server ".concat(e._oauthClient.getServiceUri()," doesn't support check_session_iframe endpoint.")),r());case 6:case"end":
return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)}))),function(){return c.apply(this,arguments)})},{key:"_onMessage",
value:function(t){this._logger.debug("Received message from ".concat(t.origin,": ").concat(t.data)),
this._checkSessionIframe&&t.source===this._checkSessionIframe.contentWindow&&t.origin===this._iframeTrustedOrigin?(this._logger.debug('Propagating session state "'.concat(t.data,'" to listeners.')),
this._runningCheckSessionResolve&&this._runningCheckSessionResolve(t.data),this._runningCheckSessionResolve=null,
this._runningCheckSessionPromise=null):this._logger.debug('Message "'.concat(t.data,'" from ').concat(t.origin," is not from check session iframe, ignoring."))}},{key:"_addUriParams",
value:function(t,e){var r=[];for(var n in e){var o=e[n];null!=o&&r.push(encodeURIComponent(n)+"="+encodeURIComponent(o+""))}return t+"&"+r.join("&")}}],o=[{key:"getRestoreSessionOnLoad",
value:function(){var t=document.querySelector("meta[".concat("uuAppOidcRestoreSessionOnLoad","]")),e=t?t.attributes.uuAppOidcRestoreSessionOnLoad.value:null
;return e||(null==(e=_.getString("uu_app_oidc_restore_session_on_load"))||"true"===e?e="optional":"false"===e&&(e="disabled")),e}}],r&&s(e.prototype,r),o&&s(e,o),Object.defineProperty(e,"prototype",{
writable:!1}),t}();t.exports=O},function(t,e){
var r=new Function("try {return this===window;}catch(e){ return false;}")()?"interactive"===document.readyState||"complete"===document.readyState?Promise.resolve():new Promise((function(t){
document.addEventListener("DOMContentLoaded",t,!1)
})):Promise.resolve(),n=location.href.startsWith("about:")&&window.frameElement?parent:window,o=n.document.querySelector("base"),i=n.location.protocol+"//"+n.location.host+(o&&o.getAttribute("data-uu-app-base")||"/"),a=(new RegExp("uu.app.cbu=([^;]+)").exec(n.document.cookie)||[])[1]
;t.exports={domReady:r,window:n,baseElement:o,appBaseUri:i,canonicalAppBaseUri:a,toFullAppUrl:function(t){var e=n.document.createElement("a")
;return e.href=t&&t.match(/^[a-z]+:/i)?t:i+(t?t.replace(/^\/+/,""):""),e.href.toString()}}},function(t,e,r){"use strict";function n(t){
return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){
return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */o=function(){return t}
;var t={},e=Object.prototype,r=e.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value
},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,
enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function f(t,e,r,n){
var o=e&&e.prototype instanceof d?e:d,a=Object.create(o.prototype),c=new P(n||[]);return i(a,"_invoke",{value:k(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{
type:"throw",arg:t}}}t.wrap=f;var p={};function d(){}function y(){}function v(){}var g={};l(g,c,(function(){return this}));var m=Object.getPrototypeOf,_=m&&m(m(L([])));_&&_!==e&&r.call(_,c)&&(g=_)
;var b=v.prototype=d.prototype=Object.create(g);function w(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){var o;i(this,"_invoke",{
value:function(i,a){function c(){return new e((function(o,c){!function o(i,a,c,u){var s=h(t[i],t,a);if("throw"!==s.type){var l=s.arg,f=l.value
;return f&&"object"==n(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(f).then((function(t){l.value=t,c(l)}),(function(t){
return o("throw",t,c,u)}))}u(s.arg)}(i,a,o,c)}))}return o=o?o.then(c,c):c()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){
if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=S(a,r);if(c){
if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)
}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=h(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}
"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",
e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg)
;if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),
e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),
2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],
t.forEach(E,this),this.reset(!0)}function L(t){if(t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){
for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=v,
i(b,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:y,configurable:!0}),y.displayName=l(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){
var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,
l(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,
t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),l(b,s,"Generator"),
l(b,c,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){
for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,
this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),
!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg
;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}
for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc")
;if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{
if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){
var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null)
;var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg
;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},
finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),p}},catch:function(t){
for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},
delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function i(t,e){var r=Object.keys(t)
;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function a(t){
for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){c(t,e,r[e])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))
}return t}function c(t,e,r){return(e=f(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){
return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function s(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){
u(i,n,o,a,c,"next",t)}function c(t){u(i,n,o,a,c,"throw",t)}a(void 0)}))}}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,
"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function f(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){
var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string")
;return"symbol"===n(e)?e:String(e)}function h(){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=p(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e)
;return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function p(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}function d(t,e){
return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1
;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}()
;return function(){var r,n=g(t);if(e){var o=g(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v(this,r)}}function v(t,e){
if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){
if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){
return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=r(0).AuthenticationError,_=r(6),b=function(t){!function(t,e){
if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}
}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}(p,t);var e,r,n,i,c,u,f=y(p);function p(t,e,r,n){var o;return function(t,e){
if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),(o=f.call(this,t,e,r))._oauthClient=t,o._serviceName=e,o}return e=p,(r=[{key:"getResponseType",value:function(){
return"id_token token"}},{key:"restoreSession",value:(u=s(o().mark((function t(e){var r,n,i=arguments;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:
if(r=i.length>1&&void 0!==i[1]?i[1]:null,n=sessionStorage.getItem("uu_app_oidc_auth_cb"),sessionStorage.removeItem("uu_app_oidc_auth_cb"),e=a({prompt:"none"},e),
n||"forced"!==_.getRestoreSessionOnLoad()){t.next=10;break}return t.next=7,this._oauthClient.getMetadata();case 7:delete e.prompt,e.usePopup=!1,
sessionStorage.setItem("uu_app_oidc_auth_referrer",document.referrer);case 10:return t.abrupt("return",h(g(p.prototype),"restoreSession",this).call(this,e,r));case 11:case"end":return t.stop()}
}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"authenticate",value:function(t){
var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=h(g(p.prototype),"authenticate",this).call(this,t,r),o=n.then((function(t){
var r=t.authResponse,n=t.state,o=t.nonce,i=t.scope,a=t.acrValues,c=t.maxAge,u=t.clientId;return e._processAuthResponse(r,n,o,i,a,c,u)}));return o.uiComponent=n.uiComponent,o}},{
key:"getAuthResponseFromCallback",value:function(t){var e={};return t.replace(/^[^#]*#?/,"").split(/&/).forEach((function(t){
var r=t.indexOf("="),n=decodeURIComponent((-1==r?t.substr(0):t.substr(0,r)).replace(/\+/g," ")),o=decodeURIComponent((-1==r?"":t.substr(r+1)).replace(/\+/g," "));e[n]=o})),e}},{key:"refreshSession",
value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t=a({prompt:"none",usePopup:!1},t),h(g(p.prototype),"refreshSession",this).call(this,t,e)}},{
key:"getEndSessionUri",value:function(){return this._oauthClient.getEndSessionUriSync()}},{key:"_processAuthResponse",value:(c=s(o().mark((function t(e,r,n,i,a,c,u){var s,l,f,h,p,d,y,v
;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=Date.now(),t.next=3,this._validateAuthResponse(e,r,n);case 3:return l=t.sent,f=e.id_token,h=e.access_token,
p=e.session_expires_in,d=e.session_state,y=p?s+1e3*p:null,sessionStorage.removeItem("uu_app_oidc_auth_cb"),(v=sessionStorage.getItem("uu_app_oidc_auth_ctx"))&&(v=JSON.parse(v),
sessionStorage.removeItem("uu_app_oidc_auth_ctx")),t.abrupt("return",{claims:l,idToken:f,accessToken:h,authenticationContext:v,globalSessionExpiresAt:y,globalSessionState:d,clientId:u,scope:i,
acrValues:a,maxAge:c});case 10:case"end":return t.stop()}}),t,this)}))),function(t,e,r,n,o,i,a){return c.apply(this,arguments)})},{key:"_validateAuthResponse",value:(i=s(o().mark((function t(e,r,n){
var i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r||e.state===r){t.next=2;break}
throw new m("Invalid 'state' in received authorization response. Expected "+r+" but got "+e.state+". Response: "+JSON.stringify(e));case 2:if(!this._isAuthResponseExpired(e)){t.next=4;break}
throw new m("Token expired "+JSON.stringify(e));case 4:return t.next=6,this._oauthClient.parseToken(e.id_token,"idToken");case 6:if(i=t.sent,!n||i.nonce===n){t.next=9;break}
throw new m("Invalid nonce in ID token claims. Expected "+n+" but got "+i.nonce);case 9:return t.abrupt("return",i);case 10:case"end":return t.stop()}}),t,this)}))),function(t,e,r){
return i.apply(this,arguments)})},{key:"_isAuthResponseExpired",value:function(t){var e=(new Date).getTime()/1e3,r=!1;return t.issued_at||(t.issued_at=e),t.expires_at&&(r=r||t.expires_at<e-60),
t.expires_in&&t.issued_at&&(r=r||Number(t.expires_in)+Number(t.issued_at)<e-60),r}}])&&l(e.prototype,r),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}(_);t.exports=b},function(t,e,r){
"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){
return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,
o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){
var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),
"symbol"===n(a)?a:String(a)),o)}var i,a}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){
return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1
;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}()
;return function(){var r,n=s(t);if(e){var o=s(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(t,e){
if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){
if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){
return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function")
;t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(s,t);var e,r,n,u=c(s);function s(t){
var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return i(this,s),u.call(this,t,e)}return e=s,r&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e
}(r(1).BaseError);t.exports=l},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){
return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */o=function(){return t}
;var t={},e=Object.prototype,r=e.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value
},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,
enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function f(t,e,r,n){
var o=e&&e.prototype instanceof d?e:d,a=Object.create(o.prototype),c=new P(n||[]);return i(a,"_invoke",{value:k(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{
type:"throw",arg:t}}}t.wrap=f;var p={};function d(){}function y(){}function v(){}var g={};l(g,c,(function(){return this}));var m=Object.getPrototypeOf,_=m&&m(m(L([])));_&&_!==e&&r.call(_,c)&&(g=_)
;var b=v.prototype=d.prototype=Object.create(g);function w(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){var o;i(this,"_invoke",{
value:function(i,a){function c(){return new e((function(o,c){!function o(i,a,c,u){var s=h(t[i],t,a);if("throw"!==s.type){var l=s.arg,f=l.value
;return f&&"object"==n(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(f).then((function(t){l.value=t,c(l)}),(function(t){
return o("throw",t,c,u)}))}u(s.arg)}(i,a,o,c)}))}return o=o?o.then(c,c):c()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){
if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=S(a,r);if(c){
if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)
}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=h(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}
"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",
e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg)
;if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),
e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),
2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],
t.forEach(E,this),this.reset(!0)}function L(t){if(t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){
for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=v,
i(b,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:y,configurable:!0}),y.displayName=l(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){
var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,
l(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,
t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),l(b,s,"Generator"),
l(b,c,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){
for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,
this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),
!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg
;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}
for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc")
;if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{
if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){
var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null)
;var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg
;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},
finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),p}},catch:function(t){
for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},
delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function i(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){
return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function a(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){
i(a,n,o,c,u,"next",t)}function u(t){i(a,n,o,c,u,"throw",t)}c(void 0)}))}}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){
var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1
}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}
}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name)
;if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(t,e)}(t,e)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){
(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){
for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,e){
if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o
;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===n(a)?a:String(a)),o)}var i,a}function f(){
return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=h(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e)
;return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function h(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=v(t)););return t}function p(t,e){
return(p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1
;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}()
;return function(){var r,n=v(t);if(e){var o=v(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return y(this,r)}}function y(t,e){
if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){
if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){
return t.__proto__||Object.getPrototypeOf(t)})(t)}
var g=r(1),m=g.Config,_=g.Base64,b=g.BaseError,w=g.Digest,x=g.Json,k=r(14).UriBuilder,S=r(3).LoggerFactory,E=r(0).AuthenticationService,O=r(0).Session,P=r(0),L=P.Identity,T=P.ClientIdentity,j=P.ApplicationIdentity,A=P.UuAppKey,C=r(34),R=r(5),I=function(t){
!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,
configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}(P,t);var e,r,n,i,u,h,y,g,O=d(P);function P(t,e,r){
var n,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null
;s(this,P);var u=null,l=null,f=null,h=null,p=null,d=null,y=null,v=null,g=o,_="".concat("uu_app_oidc_providers_").concat(t,"_");if(g){u=g.jti,l=g.auth_id||g.sid;var b=g.auth_time||g.iat
;b&&(f=new Date(1e3*b));var w,x=g.acr
;h=null==x?1:r.indexOf(x)>-1?r.indexOf(x):r.indexOf(x.toString())>-1?r.indexOf(x.toString()):r.indexOf(Number(x.toString()))>-1?r.indexOf(Number(x.toString())):Number(x.toString())
;var k=m.getString("".concat(_,"uu_identity_claim"));if(w=k?g[k]:g.uuidentity||g.uu_identity){var E=g.loa,C=g.acr,R=g.uuappkey||g.appkey;R&&(R=A.parse(R));var I=g.name;"0-0"===w&&(h=0)
;var N=g.uuidentity_type||g.identity_type,U=g.uuidentity_account_type||"standard",F={name:I,levelOfAssurance:E,type:N,authenticationLevelOfAssurance:C,uuAppKey:R,accountType:U}
;(p=new L(w,F)).getAccountType=function(){return U}}var B=g.client_app_code,G=g.client_uuidentity;if(B||G){var D={};D.id=g.client_app_id,D.code=B,D.name=g.client_app_name
;var M=g.client_uuappkey||g.client_appkey;M&&(D.uuAppKey=A.parse(M)),D.authenticationLevelOfAssurance=g.client_acr,D.type=g.client_uuidentity_type;var z=g.client_uri;if(z){if(D.uri=z,
D.uri&&D.uri.startsWith("urn:uuoidcclient:")){var Y=D.uri.replace("urn:uuoidcclient:","").split(/[:\/](.*)/),V=c(Y,2),H=V[0],q=V[1],W=q.split(/[:\-]/),K=c(W,2),J=K[0],$=K[1]
;D.code||(D.code=H.toUpperCase().replace(/-/g,".")),D.name||(D.name=H.replace(/(-\w)/g,(function(t){return t[1].toUpperCase()})));var Z=H.split("-"),Q=c(Z,3),X=Q[0],tt=Q[1],et=Q[2];D.product=H,
D.vendor=X,D.app=tt,D.subApp=et,D.asid=J,D.awid=$}}else if(D.code){var rt=D.code.toLowerCase().split(/[\.\-_]/),nt=c(rt,3),ot=nt[0],it=nt[1],at=nt[2],ct="".concat(ot,"-").concat(it,"-").concat(at)
;D.vendor=ot,D.app=it,D.subApp=at,D.product=ct,D.uri="".concat("urn:uuoidcclient:").concat(ct)}y=new T(G,D),v=new j(G,D)}var ut=g.act;if(ut){var st,lt=m.getString("".concat(_,"uu_identity_claim"))
;st=lt?ut[lt]:ut.uuidentity||g.uu_identity;var ft=ut.name,ht=ut.uuidentity_type||ut.identity_type,pt=ut.loa,dt=ut.acr,yt=ut.uuappkey||ut.appkey;yt&&(yt=A.parse(yt))
;var vt=ut.uuidentity_account_type||"standard",gt={name:ft,levelOfAssurance:pt,type:ht,authenticationLevelOfAssurance:dt,uuAppKey:yt,accountType:vt};(d=new L(st,gt)).getAccountType=function(){
return vt}}}return(n=O.call(this,{id:u,authenticationId:l,authenticationTime:f,authenticationLevelOfAssurance:h,identity:p,actorIdentity:d,clientIdentity:y,applicationIdentity:v,attributes:g
}))._configPrefix=_,n._serviceName=t,n._oauthClient=e,n._supportedAcrValues=r,n._idToken=i,n._accessToken=a,n._logger=S.get("uuapp.oidc.Session"),
n._authenticated||n._authenticationLevelOfAssurance||(n._authenticated=n._identity&&n._identity.getUuIdentity()&&"0-0"!==n._identity.getUuIdentity()),n._actorIdentity=d,n}return e=P,r=[{
key:"getServiceName",value:function(){return this._serviceName}},{key:"getServiceUri",value:(g=a(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:
if("function"!=typeof(e=E.get(this._serviceName)).getServiceUri){t.next=7;break}return t.next=4,e.getServiceUri();case 4:t.t0=t.sent,t.next=8;break;case 7:t.t0=null;case 8:
return t.abrupt("return",t.t0);case 9:case"end":return t.stop()}}),t,this)}))),function(){return g.apply(this,arguments)})},{key:"getProviderUri",value:function(){var t=E.get(this._serviceName)
;return"function"==typeof t.getProviderUri?t.getProviderUri():null}},{key:"getActorIdentity",value:function(){return this._actorIdentity}},{key:"getCallTokenScope",value:(y=a(o().mark((function t(e){
var r,n,i,a,c,u,s=arguments;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=s.length>1&&void 0!==s[1]?s[1]:{},
null==(n=r?r.scopeMode:null)&&(i="".concat(this._configPrefix,"default_call_token_scope_mode"),n=m.getString(i)||"baseUri"),"none"!==n){t.next=5;break}return t.abrupt("return",null);case 5:
if("baseUri"!==n||!r.baseUri){t.next=10;break}(a=r.baseUri.toString().replace(/^\/|\/$/g,"")).match(/^https?:/i)||(c=r.gatewayUri||"https://uuapp.plus4u.net",
a="".concat(c.replace(/\/$/,""),"/").concat(a)),t.next=29;break;case 10:if(t.prev=10,(u=k.parse(e)).clearParameters(),"useCase"!==n){t.next=17;break}a=u.toUri().toString(),t.next=23;break;case 17:
if("allUseCases"!==n&&"baseUri"!==n){t.next=22;break}u.setUseCase(null),a=u.toUri().toString(),t.next=23;break;case 22:throw new b("Unsupported scope mode: ".concat(n));case 23:t.next=29;break
;case 25:t.prev=25,t.t0=t.catch(10),a=(a=e.toString().split("?")[0]).replace(/\/$/,"");case 29:return t.abrupt("return",a);case 30:case"end":return t.stop()}}),t,this,[[10,25]])}))),function(t){
return y.apply(this,arguments)})},{key:"getCallToken",value:(h=a(o().mark((function t(e){var r,n,i,a,c,u,s,l,f,h,p,d,y,v,g=arguments;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:
if(r=g.length>1&&void 0!==g[1]?g[1]:{},"boolean"!=typeof(n=r?r.useTokenExchange:null)&&(i="".concat(this._configPrefix,"use_token_exchange"),n=!m.hasKey(i)||m.getBoolean(i)),
(a=r?r.callTokenType:null)||(c="".concat(this._configPrefix,"call_token_type"),a=m.getString(c)),u=!!r&&r.excludeAuthenticationType,s=null,n){t.next=11;break}
"idToken"===a?s=this._idToken:"accessToken"===a?s=this._accessToken:a||(s=this._idToken||this._accessToken),t.next=30;break;case 11:return t.next=13,R.getClientId(this._serviceName);case 13:
return l=t.sent,
f=Array.isArray(e)?w.sha1("".concat(this.getIdentity().getUuIdentity(),":").concat(this.getAuthenticationId(),":").concat(l,":").concat(e.sort().join("|"))):w.sha1("".concat(this.getIdentity().getUuIdentity(),":").concat(this.getAuthenticationId(),":").concat(l,":").concat(e)),
t.next=17,this._oauthClient.getToken(f);case 17:if(h=t.sent){t.next=29;break}return"idToken"===a?(p=this._idToken,d=a):"accessToken"===a&&(p=this._accessToken,d=a),p||(this._idToken?(p=this._idToken,
d="idToken"):this._accessToken&&(p=this._accessToken,d="accessToken")),t.next=23,R.getClientCredentials(this._serviceName);case 23:return y=t.sent,t.next=26,this._oauthClient.exchangeToken(p,d,y,e)
;case 26:h=t.sent,v=h.expires_at||Number(new Date/1e3+h.expires_in),this._oauthClient.cacheToken(f,v,h);case 29:
"idToken"===a?s=h.id_token:"accessToken"===a?s=h.access_token:a||(s=h.id_token||h.access_token);case 30:if(s){t.next=32;break}
throw new b('Call token of type "'.concat(a||"idToken",'" is not available.'));case 32:if(!0!==u){t.next=36;break}return t.abrupt("return",s);case 36:return t.abrupt("return","Bearer ".concat(s))
;case 37:case"end":return t.stop()}}),t,this)}))),function(t){return h.apply(this,arguments)})},{key:"actAs",value:(u=a(o().mark((function t(e){var r,n,i,a,c,u,s,l,f,h,p,d,y,v=arguments
;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=v.length>1&&void 0!==v[1]?v[1]:null,n=v.length>2&&void 0!==v[2]?v[2]:{},null==r||"string"==typeof r||Array.isArray(r)||(n=r,
r=null),(i=n?n.callTokenType:null)||(a="".concat(this._configPrefix,"call_token_type"),i=m.getString(a)),c=null,
"idToken"===i?c=this._idToken:"accessToken"===i?c=this._accessToken:i||(c=this._idToken||this._accessToken),t.next=9,R.getClientId(this._serviceName);case 9:return u=t.sent,
s=Array.isArray(r)?w.sha1("".concat(this.getIdentity().getUuIdentity(),":").concat(this.getAuthenticationId(),":").concat(e,":").concat(u,":").concat(r.sort().join("|"))):w.sha1("".concat(this.getIdentity().getUuIdentity(),":").concat(this.getAuthenticationId(),":").concat(e,":").concat(u,":").concat(r)),
t.next=13,this._oauthClient.getToken(s);case 13:return l=t.sent,t.next=16,R.getClientCredentials(this._serviceName);case 16:if(f=t.sent,l){t.next=24;break}return h=_.urlSafeEncode(x.stringify({
uuidentity:e})),t.next=21,this._oauthClient.delegateToken(c,i,h,f,r);case 21:l=t.sent,p=l.expires_at||Number(new Date/1e3+l.expires_in),this._oauthClient.cacheToken(s,p,l);case 24:return t.next=26,
this._oauthClient.parseToken(l.id_token,"id_token",!0,f);case 26:return d=t.sent,t.next=29,this._oauthClient.getSupportedAcrValues();case 29:return y=t.sent,
t.abrupt("return",new this.constructor(this._serviceName,this._oauthClient,y,d,l.id_token,l.access_token));case 31:case"end":return t.stop()}}),t,this)}))),function(t){return u.apply(this,arguments)})
},{key:"close",value:(i=a(o().mark((function t(){var e,r=this;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f(v(P.prototype),"close",this).call(this),t.next=3,
R.getClientCredentials(this._serviceName);case 3:if(e=t.sent,!this._idToken&&!this._accessToken){t.next=13;break}return t.prev=5,t.next=8,
this._oauthClient.revokeToken(this._idToken||this._accessToken,e);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(5),this._logger.error("Token revocation failed.",t.t0);case 13:
this._oauthClient.listTokens((function(t,e){if(e.id_token==r._idToken||e.access_token==r._accessToken)return r._oauthClient.deleteToken(t),!1})),this._idToken=null,this._accessToken=null;case 16:
case"end":return t.stop()}}),t,this,[[5,10]])}))),function(){return i.apply(this,arguments)})}],n=[{key:"_createEmptySession",value:function(){return new C}}],r&&l(e.prototype,r),n&&l(e,n),
Object.defineProperty(e,"prototype",{writable:!1}),P}(O);t.exports=I},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){
return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var o=e[r]
;o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,e){if("object"!==n(t)||null===t)return t
;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}
return("string"===e?String:Number)(t)}(i,"string"),"symbol"===n(a)?a:String(a)),o)}var i,a}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}
function a(t,e){return(a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){
if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{
return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=s(t);if(e){var o=s(this).constructor
;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e
;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){
if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){
return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function")
;t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(s,t);var e,r,n,u=c(s);function s(){
return i(this,s),u.apply(this,arguments)}return e=s,r&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(r(0).AuthenticationError);t.exports=l},function(t,e,r){
"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){
return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */o=function(){return t}
;var t={},e=Object.prototype,r=e.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value
},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,
enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function f(t,e,r,n){
var o=e&&e.prototype instanceof d?e:d,a=Object.create(o.prototype),c=new P(n||[]);return i(a,"_invoke",{value:k(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{
type:"throw",arg:t}}}t.wrap=f;var p={};function d(){}function y(){}function v(){}var g={};l(g,c,(function(){return this}));var m=Object.getPrototypeOf,_=m&&m(m(L([])));_&&_!==e&&r.call(_,c)&&(g=_)
;var b=v.prototype=d.prototype=Object.create(g);function w(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){var o;i(this,"_invoke",{
value:function(i,a){function c(){return new e((function(o,c){!function o(i,a,c,u){var s=h(t[i],t,a);if("throw"!==s.type){var l=s.arg,f=l.value
;return f&&"object"==n(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(f).then((function(t){l.value=t,c(l)}),(function(t){
return o("throw",t,c,u)}))}u(s.arg)}(i,a,o,c)}))}return o=o?o.then(c,c):c()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){
if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=S(a,r);if(c){
if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)
}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=h(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}
"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",
e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg)
;if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),
e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),
2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],
t.forEach(E,this),this.reset(!0)}function L(t){if(t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){
for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=v,
i(b,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:y,configurable:!0}),y.displayName=l(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){
var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,
l(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,
t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),l(b,s,"Generator"),
l(b,c,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){
for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,
this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),
!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg
;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}
for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc")
;if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{
if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){
var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null)
;var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg
;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},
finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),p}},catch:function(t){
for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},
delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function i(t,e){var r=Object.keys(t)
;if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function a(t){
for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){c(t,e,r[e])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))
}return t}function c(t,e,r){return(e=f(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){
return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function s(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){
u(i,n,o,a,c,"next",t)}function c(t){u(i,n,o,a,c,"throw",t)}a(void 0)}))}}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,
"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function f(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){
var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string")
;return"symbol"===n(e)?e:String(e)}function h(){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=p(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e)
;return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function p(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}function d(t,e){
return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1
;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}()
;return function(){var r,n=g(t);if(e){var o=g(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v(this,r)}}function v(t,e){
if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){
if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){
return t.__proto__||Object.getPrototypeOf(t)})(t)}
var m=r(0).AuthenticationError,_=r(2).AppClient,b=r(6),w=r(8),x=location.href.startsWith("about:")&&window.frameElement?parent:window,k=new RegExp("uu.app.csrf=([^;]+)"),S=function(t){!function(t,e){
if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}
}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}(p,t);var e,r,n,i,c,u,f=y(p);function p(t,e,r,n){var o;return function(t,e){
if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p),(o=f.call(this,t,e,r))._oauthClient=t,o._serviceName=e,o._redirectUri=r,o._appBaseUri=n,o._client=new _,
o._implicitFlow=new w(t,e,r,n),o}return e=p,(r=[{key:"getResponseType",value:function(){return"code"}},{key:"createAuthState",value:function(){
var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=h(g(p.prototype),"createAuthState",this).call(this,t,e)
;return r.redirectUri=this._redirectUri,r}},{key:"restoreSession",value:(u=s(o().mark((function t(e){var r,n,i=arguments;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:
if(r=i.length>1&&void 0!==i[1]?i[1]:null,n=sessionStorage.getItem("uu_app_oidc_auth_cb"),sessionStorage.removeItem("uu_app_oidc_auth_cb"),e=a({prompt:"none"},e),
n||"forced"!==b.getRestoreSessionOnLoad()){t.next=10;break}return t.next=7,this._oauthClient.getMetadata();case 7:delete e.prompt,e.usePopup=!1,
sessionStorage.setItem("uu_app_oidc_auth_referrer",document.referrer);case 10:return t.abrupt("return",h(g(p.prototype),"restoreSession",this).call(this,e,r));case 11:case"end":return t.stop()}
}),t,this)}))),function(t){return u.apply(this,arguments)})},{key:"authenticate",value:function(t){
var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=h(g(p.prototype),"authenticate",this).call(this,t,r),o=n.then((function(t){
var r=t.authResponse,n=t.state,o=t.nonce,i=t.scope,a=t.acrValues,c=t.maxAge,u=t.clientId;return e._processAuthResponse(r,n,o,i,a,c,u)}));return o.uiComponent=n.uiComponent,o}},{
key:"getAuthResponseFromCallback",value:function(t){var e={};return t.replace(/^[^?#]*[?#]?/,"").replace(/#/,"&").split(/&/).filter(Boolean).forEach((function(t){
var r=t.indexOf("="),n=decodeURIComponent((-1==r?t.substr(0):t.substr(0,r)).replace(/\+/g," ")),o=decodeURIComponent((-1==r?"":t.substr(r+1)).replace(/\+/g," "));e[n]=o})),e}},{key:"refreshSession",
value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t=a({prompt:"none",usePopup:!1},t),h(g(p.prototype),"refreshSession",this).call(this,t,e)}},{
key:"getCallToken",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._implicitFlow.getCallToken(t,e)}},{key:"getEndSessionUri",value:function(){
var t=this._appBaseUri+"oidc/logout",e=(k.exec(x.document.cookie)||[])[1];return e&&(t+="?csrf_token=".concat(encodeURIComponent(e))),t}},{key:"isEndSessionIdTokenHintRequired",value:function(){
return!1}},{key:"_processAuthResponse",value:(c=s(o().mark((function t(e,r,n,i,a,c,u){var s,l,f,h,p,d;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=Date.now(),t.next=3,
this._validateAuthResponse(e,r,n);case 3:return t.next=5,this._client.get(this._appBaseUri+"oidc/introspect",{_:Date.now()});case 5:return delete(l=t.sent.data).session_info,delete l.uuAppErrorMap,
f=e.session_expires_in,h=e.session_state,p=f?s+1e3*f:null,sessionStorage.removeItem("uu_app_oidc_auth_cb"),(d=sessionStorage.getItem("uu_app_oidc_auth_ctx"))&&(d=JSON.parse(d),
sessionStorage.removeItem("uu_app_oidc_auth_ctx")),t.abrupt("return",{claims:l,idToken:null,accessToken:null,authenticationContext:d,globalSessionExpiresAt:p,globalSessionState:h,clientId:u,scope:i,
acrValues:a,maxAge:c});case 14:case"end":return t.stop()}}),t,this)}))),function(t,e,r,n,o,i,a){return c.apply(this,arguments)})},{key:"_validateAuthResponse",value:(i=s(o().mark((function t(e,r,n){
return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r||e.state===r){t.next=2;break}
throw new m("Invalid 'state' in received authorization response. Expected "+r+" but got "+e.state+". Response: "+JSON.stringify(e));case 2:case"end":return t.stop()}}),t)}))),function(t,e,r){
return i.apply(this,arguments)})}])&&l(e.prototype,r),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),p}(b);t.exports=S},function(t,e,r){"use strict";function n(t){
return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){
return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){
if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e)
;var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t)
;if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(t,e)}(t)||function(){
throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){
(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function a(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */a=function(){return t}
;var t={},e=Object.prototype,r=e.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value
},i="function"==typeof Symbol?Symbol:{},c=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,
enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function f(t,e,r,n){
var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:k(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{
type:"throw",arg:t}}}t.wrap=f;var p={};function d(){}function y(){}function v(){}var g={};l(g,c,(function(){return this}));var m=Object.getPrototypeOf,_=m&&m(m(L([])));_&&_!==e&&r.call(_,c)&&(g=_)
;var b=v.prototype=d.prototype=Object.create(g);function w(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){var i;o(this,"_invoke",{
value:function(o,a){function c(){return new e((function(i,c){!function o(i,a,c,u){var s=h(t[i],t,a);if("throw"!==s.type){var l=s.arg,f=l.value
;return f&&"object"==n(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(f).then((function(t){l.value=t,c(l)}),(function(t){
return o("throw",t,c,u)}))}u(s.arg)}(o,a,i,c)}))}return i=i?i.then(c,c):c()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){
if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=S(a,r);if(c){
if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)
}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=h(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}
"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",
e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg)
;if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),
e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),
2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],
t.forEach(E,this),this.reset(!0)}function L(t){if(t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){
for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=v,
o(b,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=l(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){
var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,
l(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,
t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),l(b,s,"Generator"),
l(b,c,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){
for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,
this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),
!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg
;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}
for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc")
;if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{
if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){
var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null)
;var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg
;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},
finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),p}},catch:function(t){
for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},
delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function c(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){
return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function u(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){
c(i,n,o,a,u,"next",t)}function u(t){c(i,n,o,a,u,"throw",t)}a(void 0)}))}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){
for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,e){
if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o
;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===n(a)?a:String(a)),o)}var i,a}
var f=r(1),h=f.BaseError,p=f.LruCache,d=f.Base64,y=r(2),v=y.AppClient,g=y.ApplicationError,m=r(0),_=m.InvalidCredentials,b=m.AuthenticationError,w=r(2),x=w.PerflogHandler,k=w.RemoteErrorHandler,S=w.TransformParametersHandler,E=r(14).UriBuilder,O=r(9),P=r(25),L=r(26),T=r(33),j=[x,k,S],A=[k,S],C="application/x-www-form-urlencoded",R="application/json",I="urn:ietf:params:oauth:token-type:".concat("id_token"),N="urn:ietf:params:oauth:token-type:".concat("access_token"),U="urn:ietf:params:oauth:token-type:".concat("refresh_token"),F="urn:ietf:params:oauth:client-assertion-type:jwt-bearer",B=/^[a-zA-Z0-9\-_]+\.[a-zA-Z0-9\-_]+\.[a-zA-Z0-9\-_]+$/,G=["none","low","medium","high","veryHigh"],D=["none","low","standard","high","veryHigh"],M=function(){
function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(s(this,t),!e)throw new h("Service URI must be defined");var n=r.tokenCacheSize?Number(r.tokenCacheSize):2048
;this._tokenCache=new p({maxSize:n}),this._tokenTimeLeeway=r.tokenTimeLeeway?Number(r.tokenTimeLeeway):300,this._discovery=new P(e,r),this._jwt=new L(this._discovery,r)
;var o="boolean"!=typeof r.perflogEnabled||r.perflogEnabled,i=o?j:A;this._client=new v(Object.assign(r,{interceptors:i})),this._metadata=null,this._serviceUri=e,this._customIssuer=r.issuer,
this._defaultScope=null!=r.defaultScope?r.defaultScope:"openid",this._accessTokenPattern=new RegExp(r.accessTokenPattern||".^"),this._refreshTokenPattern=new RegExp(r.refreshTokenPattern||".^"),
this._mtlsGateway=r.mtlsGateway}var e,r,i,c,f,y,m,w,x,k,S,M,z,Y,V,H,q,W,K,J,$,Z,Q;return e=t,(r=[{key:"getServiceUri",value:function(){return this._serviceUri}},{key:"getMetadata",
value:(Q=u(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._discovery.getMetadata();case 2:return this._metadata=t.sent,
t.abrupt("return",this._metadata);case 4:case"end":return t.stop()}}),t,this)}))),function(){return Q.apply(this,arguments)})},{key:"getMetadataSync",value:function(){
if(!this._metadata)throw new O("Asynchronous method getMetadata must be invoked prior to synchronous invocation");return this._metadata}},{key:"getIssuerList",value:(Z=u(a().mark((function t(){var e,r
;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getMetadata();case 2:return e=t.sent,r=[e.issuer],e.access_token_issuer&&r.push(e.access_token_issuer),
this._customIssuer&&r.push(this._customIssuer),t.abrupt("return",r);case 7:case"end":return t.stop()}}),t,this)}))),function(){return Z.apply(this,arguments)})},{key:"getSupportedAcrValues",
value:($=u(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getMetadata();case 2:if(t.t0=t.sent.acr_values_supported,t.t0){t.next=5;break}
t.t0=[];case 5:return t.abrupt("return",t.t0);case 6:case"end":return t.stop()}}),t,this)}))),function(){return $.apply(this,arguments)})},{key:"getSupportedAcrValuesSync",value:function(){
return this.getMetadataSync().acr_values_supported||[]}},{key:"getUserInfoUri",value:(J=u(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,
this.getMetadata();case 2:return t.abrupt("return",t.sent.userinfo_endpoint);case 3:case"end":return t.stop()}}),t,this)}))),function(){return J.apply(this,arguments)})},{key:"getEndSessionUri",
value:(K=u(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getMetadata();case 2:return t.abrupt("return",t.sent.end_session_endpoint)
;case 3:case"end":return t.stop()}}),t,this)}))),function(){return K.apply(this,arguments)})},{key:"getEndSessionUriSync",value:function(){return this.getMetadataSync().end_session_endpoint}},{
key:"getCheckSessionIframeUri",value:(W=u(a().mark((function t(){var e;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getMetadata();case 2:
return e=t.sent.check_session_iframe,t.abrupt("return",this._replaceMtlsGatewayIfNeeded(e));case 4:case"end":return t.stop()}}),t,this)}))),function(){return W.apply(this,arguments)})},{
key:"getAuthorizationUri",value:(q=u(a().mark((function t(e,r,n,o){var i,c=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=c.length>4&&void 0!==c[4]?c[4]:null,
t.next=3,this.getMetadata();case 3:return t.abrupt("return",this.getAuthorizationUriSync(e,r,n,o,i));case 4:case"end":return t.stop()}}),t,this)}))),function(t,e,r,n){return q.apply(this,arguments)})
},{key:"getAuthorizationUriSync",value:function(t,e,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;r&&r.client_id&&(r=r.client_id)
;var a=this._replaceMtlsGatewayIfNeeded(this.getMetadataSync().authorization_endpoint),c="".concat(a,"?");if(c+="response_type=".concat(encodeURIComponent(t),"&"),
c+="redirect_uri=".concat(encodeURIComponent(e),"&"),c+="client_id=".concat(encodeURIComponent(r),"&"),c+="scope=".concat(encodeURIComponent(this._getOidcScope(i))),n){
var u=this.getSupportedAcrValuesSync();if(u&&u.length>0){var s=n.toString();u.includes("medium")?s=s.replace("standard","medium"):u.includes("standard")&&(s=s.replace("medium","standard"))
;var l=s.split(" "),f=[];l.forEach((function(t){if(u.includes(t))f.push(t);else{var e=Number(t);u.includes(e)?f.push(e):u[e]?f.push(u[e]):((e=G.indexOf(t))>-1||(e=D.indexOf(t))>-1)&&f.push(e)}})),
(f=f.filter((function(t){return null!=t}))).length>1&&!isNaN(f[0])&&(f=[Math.min.apply(Math,o(f))]),f.length>0&&(c+="&acr_values=".concat(encodeURIComponent(f.join(" "))))}}return c}},{
key:"grantAuthorizationCodeToken",value:(H=u(a().mark((function t(e,r,n){var o,i,c=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:
return o=c.length>3&&void 0!==c[3]?c[3]:null,(i={}).grant_type="authorization_code",i.code=e,i.client_id=r.client_id,i.scope=this._getOidcScope(o),n&&(i.redirect_uri=n),t.next=9,this._grantToken(i,r)
;case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return H.apply(this,arguments)})},{key:"grantResourceOwnerPasswordCredentialsToken",
value:(V=u(a().mark((function t(e,r,n){var o,i,c=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=c.length>3&&void 0!==c[3]?c[3]:null,(i={}).grant_type="password",
i.username=e,i.password=r,i.scope=this._getOidcScope(o),t.next=8,this._grantToken(i,n);case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t,this)}))),function(t,e,r){
return V.apply(this,arguments)})},{key:"grantImplicitFlowToken",value:(Y=u(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:
throw new h("Method not implemented.");case 1:case"end":return t.stop()}}),t)}))),function(){return Y.apply(this,arguments)})},{key:"grantHybridFlowToken",value:(z=u(a().mark((function t(){
return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw new h("Method not implemented.");case 1:case"end":return t.stop()}}),t)}))),function(){return z.apply(this,arguments)})},{
key:"grantClientCredentialsToken",value:(M=u(a().mark((function t(e){var r,n,o=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:null,
(n={}).grant_type="client_credentials",n.scope=this._getOidcScope(r),t.next=6,this._grantToken(n,e);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)}))),function(t){
return M.apply(this,arguments)})},{key:"refreshToken",value:(S=u(a().mark((function t(e,r){var n,o,i=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:
return n=i.length>2&&void 0!==i[2]?i[2]:null,(o={}).grant_type="refresh_token",o.refresh_token=e,o.scope=this._getOidcScope(n),t.next=7,this._grantToken(o,r);case 7:return t.abrupt("return",t.sent)
;case 8:case"end":return t.stop()}}),t,this)}))),function(t,e){return S.apply(this,arguments)})},{key:"exchangeToken",value:(k=u(a().mark((function t(e){var r,o,i,c,u=arguments
;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:null,o=u.length>2?u[2]:void 0,i=u.length>3&&void 0!==u[3]?u[3]:null,
null!=r&&"object"===n(r)&&(i=o,o=r,r=null),(c={}).grant_type="urn:ietf:params:oauth:grant-type:token-exchange",c.subject_token=e,
"idToken"===r?c.subject_token_type=I:"accessToken"===r?c.subject_token_type=N:e.match(B)?c.subject_token_type=I:c.subject_token_type=N,c.scope=this._getOidcScope(i),t.next=11,this._grantToken(c,o)
;case 11:return t.abrupt("return",t.sent);case 12:case"end":return t.stop()}}),t,this)}))),function(t){return k.apply(this,arguments)})},{key:"delegateToken",value:(x=u(a().mark((function t(e){
var r,o,i,c,u,s,l=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:null,o=l.length>2?l[2]:void 0,
i=l.length>3&&void 0!==l[3]?l[3]:null,c=l.length>4?l[4]:void 0,u=l.length>5&&void 0!==l[5]?l[5]:null,null!=r&&"idToken"!==r&&"accessToken"!==r&&(u=c,c=i,o=r,r=null),null!=i&&"object"===n(i)&&(u=c,c=i,
i=null),(s={}).grant_type="urn:ietf:params:oauth:grant-type:token-exchange",s.actor_token=e,s.subject_token=o,
"idToken"===r?s.actor_token_type=I:"accessToken"===r?s.actor_token_type=N:e.match(B)&&(s.actor_token_type=I),
"idToken"===i?s.subject_token_type=I:"accessToken"===i?s.subject_token_type=N:o.match(B)&&(s.subject_token_type=I),s.scope=this._getOidcScope(u),t.next=16,this._grantToken(s,c);case 16:
return t.abrupt("return",t.sent);case 17:case"end":return t.stop()}}),t,this)}))),function(t){return x.apply(this,arguments)})},{key:"introspectToken",value:(w=u(a().mark((function t(e){
var r,o,i,c,u,s,l,f,h,p,d=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:null,o=d.length>2&&void 0!==d[2]?d[2]:null,
null!=r&&"object"===n(r)&&(o=r,r=null),t.next=5,this.getMetadata();case 5:if(i=t.sent,c=i.token_introspection_endpoint,(u={}).token=e,(s=r||this._getTokenTypeHint(e))&&(u.token_type_hint=s),
(l={})["Content-Type"]=C,l.Accept=R,!o){t.next=19;break}return t.next=17,this._createClientAuthnHeader(o);case 17:f=t.sent,(h=f.match(/^Bearer (.*)/))?(u.client_id=o.client_id,u.client_assertion=h[1],
u.client_assertion_type=F):l.Authorization=f;case 19:return p=null,t.prev=20,t.next=23,this._client.post(c,u,{headers:l});case 23:p=t.sent,t.next=33;break;case 26:if(t.prev=26,t.t0=t.catch(20),
!(t.t0 instanceof g)){t.next=32;break}throw new _("Invalid credentials.",t.t0);case 32:throw new b("Authentication failed.",t.t0);case 33:if(p.active){t.next=35;break}
throw new _("Invalid credentials.");case 35:return t.abrupt("return",p.data);case 36:case"end":return t.stop()}}),t,this,[[20,26]])}))),function(t){return w.apply(this,arguments)})},{
key:"revokeToken",value:(m=u(a().mark((function t(e){var r,n,o,i,c,u,s,l,f,h=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:null,
t.next=3,this.getMetadata();case 3:if(n=t.sent,o=n.token_revocation_endpoint,(i={}).token=e,(c=this._getTokenTypeHint(e))&&(i.token_type_hint=c),(u={})["Content-Type"]=C,u.Accept=R,!r){t.next=17;break
}return t.next=15,this._createClientAuthnHeader(r);case 15:s=t.sent,(l=s.match(/^Bearer (.*)/))?(i.client_id=r.client_id,i.client_assertion=l[1],i.client_assertion_type=F):u.Authorization=s;case 17:
return f=null,t.prev=18,t.next=21,this._client.post(o,i,{headers:u});case 21:f=t.sent,t.next=31;break;case 24:if(t.prev=24,t.t0=t.catch(18),!(t.t0 instanceof g)){t.next=30;break}
throw new _("Invalid credentials.",t.t0);case 30:throw new b("Authentication failed.",t.t0);case 31:return t.abrupt("return",f.data);case 32:case"end":return t.stop()}}),t,this,[[18,24]])}))),
function(t){return m.apply(this,arguments)})},{key:"parseToken",value:(y=u(a().mark((function t(e){var r,o,i,c,u=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:
if(r=u.length>1&&void 0!==u[1]?u[1]:null,o=!(u.length>2&&void 0!==u[2])||u[2],i=u.length>3&&void 0!==u[3]?u[3]:null,null!=r&&"object"===n(r)?(i=r,o=!0,
r=null):"boolean"==typeof r?(i="object"===n(o)?o:null,o=r,r=null):"object"===n(o)&&(i=o,o=!0),!e.match(B)){t.next=10;break}return t.next=7,this._jwt.parseToken(e,o);case 7:c=t.sent,t.next=14;break
;case 10:return t.next=12,this.introspectToken(e,r,i);case 12:c=t.sent,o&&this._jwt.verifyExpiration(c);case 14:return t.abrupt("return",c);case 15:case"end":return t.stop()}}),t,this)}))),
function(t){return y.apply(this,arguments)})},{key:"cacheToken",value:function(t,e,r){var n=1e3*(e-=2*this._tokenTimeLeeway)-Date.now();n>0&&this._tokenCache.set(t,r,n)}},{key:"getToken",
value:function(t){return this._tokenCache.get(t)}},{key:"deleteToken",value:function(t){return this._tokenCache.delete(t)}},{key:"listTokens",value:function(t){this._tokenCache.forEach(t)}},{
key:"_grantToken",value:(f=u(a().mark((function t(e){var r,n,o,i,c,u,s,l=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:null,
t.next=3,this.getMetadata();case 3:if(n=t.sent,o=n.token_endpoint,(i={})["Content-Type"]=C,i.Accept=R,!r){t.next=13;break}return t.next=11,this._createClientAuthnHeader(r);case 11:c=t.sent,
(u=c.match(/^Bearer (.*)/))?(e.client_id=r.client_id,e.client_assertion=u[1],e.client_assertion_type=F):i.Authorization=c;case 13:return s=null,t.prev=14,t.next=17,this._client.post(o,e,{headers:i})
;case 17:s=t.sent,t.next=27;break;case 20:if(t.prev=20,t.t0=t.catch(14),!(t.t0 instanceof g)){t.next=26;break}throw new _("Invalid credentials.",t.t0);case 26:
throw new b("Authentication failed.",t.t0);case 27:return t.abrupt("return",s.data);case 28:case"end":return t.stop()}}),t,this,[[14,20]])}))),function(t){return f.apply(this,arguments)})},{
key:"_createClientAuthnHeader",value:(c=u(a().mark((function t(e){var r,n,o,i,c,u,s;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null,!e.client_private_key){t.next=13;break}
return t.next=4,this.getMetadata();case 4:return n=t.sent,o=Math.round(Date.now()/1e3),i={jti:Math.random().toString(16).substring(2,10),iat:o,exp:o+600,aud:n.token_endpoint,iss:e.client_id,
sub:e.client_id},t.next=9,this._jwt.createToken(i,e.client_private_key);case 9:c=t.sent,r="Bearer ".concat(c),t.next=17;break;case 13:u=e.client_id,s=e.client_secret,u=encodeURIComponent(u),
r="Basic ".concat(d.encode("".concat(u,":").concat(s)));case 17:return t.abrupt("return",r);case 18:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)})},{
key:"_getOidcScope",value:function(t){var e=null
;return e=Array.isArray(t)?"".concat(this._defaultScope," ").concat(t.join(" ")).trim():t?"".concat(this._defaultScope," ").concat(t):this._defaultScope,e=T.transformScope(e)}},{
key:"_getTokenTypeHint",value:function(t){return this._accessTokenPattern.test(t)?N:this._refreshTokenPattern.test(t)?U:B.test(t)?I:null}},{key:"_replaceMtlsGatewayIfNeeded",value:function(t){
if(this._mtlsGateway){var e=(new E).parse(t),r=this._mtlsGateway;return e.setGateway(r).toString()}return t}}])&&l(e.prototype,r),i&&l(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}()
;t.exports=M},function(t,e,r){t.exports=r(4).Uri},function(t,e){function r(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}r.keys=function(){return[]},r.resolve=r,
t.exports=r,r.id=15},function(t,e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){
return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}"undefined"==typeof window||window.uuOidcCallbackFn||(window.uuOidcCallbackFn=function(t,e,n){
for(var o=window.uuOidcCallbackFn.loginWindows,i=0;i<o.length;++i){var a=o[i];if(a.state.loginWindow==e)return n&&sessionStorage.setItem("uu_app_oidc_auth_ctx","object"===r(n)?JSON.stringify(n):n),
void a.component.finalize(t)}console.warn("["+(new Date).toISOString()+"]  WARN uuapp.oidc.CallbackHandler: Received unexpected callback from window",e,"Passed result was:",t,"Ignoring the callback.")
},window.uuOidcCallbackFn.loginWindows=[]),t.exports={registerForCallback:function(t,e){window.uuOidcCallbackFn.loginWindows.push({component:t,state:e})},unregisterForCallback:function(t){
for(var e=window.uuOidcCallbackFn.loginWindows,r=0;r<e.length;++r)if(e[r].component===t){e.splice(r,1);break}}}},function(t,e,r){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var n=r(28),o=r(29),i=r(30);function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function c(t,e){if(a()<e)throw new RangeError("Invalid typed array length")
;return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,r){if(!(u.TYPED_ARRAY_SUPPORT||this instanceof u))return new u(t,e,r)
;if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}return s(this,t,e,r)}function s(t,e,r,n){
if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,
r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds")
;e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=h(t,e);return t
}(t,e,r,n):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!u.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding')
;var n=0|d(e,r),o=(t=c(t,n)).write(e,r);o!==n&&(t=t.slice(0,o));return t}(t,e,r):function(t,e){if(u.isBuffer(e)){var r=0|p(e.length);return 0===(t=c(t,r)).length||e.copy(t,0,0,r),t}if(e){
if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?c(t,0):h(t,e);if("Buffer"===e.type&&i(e.data))return h(t,e.data)}
var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){
if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e){if(l(e),t=c(t,e<0?0:0|p(e)),
!u.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function h(t,e){var r=e.length<0?0:0|p(e.length);t=c(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function p(t){
if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function d(t,e){if(u.isBuffer(t))return t.length
;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length
;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return D(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":
return 2*r;case"hex":return r>>>1;case"base64":return M(t).length;default:if(n)return D(t).length;e=(""+e).toLowerCase(),n=!0}}function y(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),
e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return T(this,e,r);case"utf8":case"utf-8":
return O(this,e,r);case"ascii":return P(this,e,r);case"latin1":case"binary":return L(this,e,r);case"base64":return E(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,e,r)
;default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function v(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function g(t,e,r,n,o){if(0===t.length)return-1
;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(o)return-1;r=t.length-1}else if(r<0){
if(!o)return-1;r=0}if("string"==typeof e&&(e=u.from(e,n)),u.isBuffer(e))return 0===e.length?-1:m(t,e,r,n,o);if("number"==typeof e)return e&=255,
u.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):m(t,[e],r,n,o)
;throw new TypeError("val must be string, number or Buffer")}function m(t,e,r,n,o){var i,a=1,c=t.length,u=e.length
;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;a=2,c/=2,u/=2,r/=2}function s(t,e){
return 1===a?t[e]:t.readUInt16BE(e*a)}if(o){var l=-1;for(i=r;i<c;i++)if(s(t,i)===s(e,-1===l?0:i-l)){if(-1===l&&(l=i),i-l+1===u)return l*a}else-1!==l&&(i-=i-l),l=-1}else for(r+u>c&&(r=c-u),
i=r;i>=0;i--){for(var f=!0,h=0;h<u;h++)if(s(t,i+h)!==s(e,h)){f=!1;break}if(f)return i}return-1}function _(t,e,r,n){r=Number(r)||0;var o=t.length-r;n?(n=Number(n))>o&&(n=o):n=o;var i=e.length
;if(i%2!=0)throw new TypeError("Invalid hex string");n>i/2&&(n=i/2);for(var a=0;a<n;++a){var c=parseInt(e.substr(2*a,2),16);if(isNaN(c))return a;t[r+a]=c}return a}function b(t,e,r,n){
return z(D(e,t.length-r),t,r,n)}function w(t,e,r,n){return z(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function x(t,e,r,n){return w(t,e,r,n)}
function k(t,e,r,n){return z(M(e),t,r,n)}function S(t,e,r,n){return z(function(t,e){for(var r,n,o,i=[],a=0;a<t.length&&!((e-=2)<0);++a)r=t.charCodeAt(a),n=r>>8,o=r%256,i.push(o),i.push(n);return i
}(e,t.length-r),t,r,n)}function E(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function O(t,e,r){r=Math.min(t.length,r);for(var n=[],o=e;o<r;){
var i,a,c,u,s=t[o],l=null,f=s>239?4:s>223?3:s>191?2:1;if(o+f<=r)switch(f){case 1:s<128&&(l=s);break;case 2:128==(192&(i=t[o+1]))&&(u=(31&s)<<6|63&i)>127&&(l=u);break;case 3:i=t[o+1],a=t[o+2],
128==(192&i)&&128==(192&a)&&(u=(15&s)<<12|(63&i)<<6|63&a)>2047&&(u<55296||u>57343)&&(l=u);break;case 4:i=t[o+1],a=t[o+2],c=t[o+3],
128==(192&i)&&128==(192&a)&&128==(192&c)&&(u=(15&s)<<18|(63&i)<<12|(63&a)<<6|63&c)>65535&&u<1114112&&(l=u)}null===l?(l=65533,f=1):l>65535&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),
n.push(l),o+=f}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=4096));return r}(n)}
e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{
var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),
e.kMaxLength=a(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,r){return s(null,t,e,r)},
u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{
value:null,configurable:!0})),u.alloc=function(t,e,r){return function(t,e,r,n){return l(e),e<=0?c(t,e):void 0!==r?"string"==typeof n?c(t,e).fill(r,n):c(t,e).fill(r):c(t,e)}(null,t,e,r)},
u.allocUnsafe=function(t){return f(null,t)},u.allocUnsafeSlow=function(t){return f(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){
if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,o=0,i=Math.min(r,n);o<i;++o)if(t[o]!==e[o]){r=t[o],n=e[o];break}
return r<n?-1:n<r?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":
case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!i(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var r
;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=u.allocUnsafe(e),o=0;for(r=0;r<t.length;++r){var a=t[r]
;if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,o),o+=a.length}return n},u.byteLength=d,u.prototype._isBuffer=!0,u.prototype.swap16=function(){
var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length
;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length
;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},
u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?O(this,0,t):y.apply(this,arguments)},u.prototype.equals=function(t){
if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES
;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,r,n,o){
if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),
e<0||r>t.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&e>=r)return 0;if(n>=o)return-1;if(e>=r)return 1;if(this===t)return 0
;for(var i=(o>>>=0)-(n>>>=0),a=(r>>>=0)-(e>>>=0),c=Math.min(i,a),s=this.slice(n,o),l=t.slice(e,r),f=0;f<c;++f)if(s[f]!==l[f]){i=s[f],a=l[f];break}return i<a?-1:a<i?1:0},
u.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},u.prototype.indexOf=function(t,e,r){return g(this,t,e,r,!0)},u.prototype.lastIndexOf=function(t,e,r){return g(this,t,e,r,!1)},
u.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{
if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-e
;if((void 0===r||r>o)&&(r=o),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return _(this,t,e,r)
;case"utf8":case"utf-8":return b(this,t,e,r);case"ascii":return w(this,t,e,r);case"latin1":case"binary":return x(this,t,e,r);case"base64":return k(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":
case"utf-16le":return S(this,t,e,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},u.prototype.toJSON=function(){return{type:"Buffer",
data:Array.prototype.slice.call(this._arr||this,0)}};function P(t,e,r){var n="";r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(127&t[o]);return n}function L(t,e,r){var n=""
;r=Math.min(t.length,r);for(var o=e;o<r;++o)n+=String.fromCharCode(t[o]);return n}function T(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=e;i<r;++i)o+=G(t[i]);return o}
function j(t,e,r){for(var n=t.slice(e,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function A(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint")
;if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function C(t,e,r,n,o,i){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance')
;if(e>o||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function R(t,e,r,n){e<0&&(e=65535+e+1)
;for(var o=0,i=Math.min(t.length-r,2);o<i;++o)t[r+o]=(e&255<<8*(n?o:1-o))>>>8*(n?o:1-o)}function I(t,e,r,n){e<0&&(e=4294967295+e+1)
;for(var o=0,i=Math.min(t.length-r,4);o<i;++o)t[r+o]=e>>>8*(n?o:3-o)&255}function N(t,e,r,n,o,i){if(r+n>t.length)throw new RangeError("Index out of range")
;if(r<0)throw new RangeError("Index out of range")}function U(t,e,r,n,i){return i||N(t,0,r,4),o.write(t,e,r,n,23,4),r+4}function F(t,e,r,n,i){return i||N(t,0,r,8),o.write(t,e,r,n,52,8),r+8}
u.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),
u.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=u.prototype;else{var o=e-t;r=new u(o,void 0);for(var i=0;i<o;++i)r[i]=this[i+t]}return r},u.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,
r||A(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n},u.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||A(t,e,this.length)
;for(var n=this[t+--e],o=1;e>0&&(o*=256);)n+=this[t+--e]*o;return n},u.prototype.readUInt8=function(t,e){return e||A(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){
return e||A(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||A(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){
return e||A(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||A(t,4,this.length),
16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||A(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o
;return n>=(o*=128)&&(n-=Math.pow(2,8*e)),n},u.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||A(t,e,this.length);for(var n=e,o=1,i=this[t+--n];n>0&&(o*=256);)i+=this[t+--n]*o
;return i>=(o*=128)&&(i-=Math.pow(2,8*e)),i},u.prototype.readInt8=function(t,e){return e||A(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){
e||A(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(t,e){e||A(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},
u.prototype.readInt32LE=function(t,e){return e||A(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||A(t,4,this.length),
this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||A(t,4,this.length),o.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){
return e||A(t,4,this.length),o.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||A(t,8,this.length),o.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){
return e||A(t,8,this.length),o.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||C(this,t,e,r,Math.pow(2,8*r)-1,0);var o=1,i=0
;for(this[e]=255&t;++i<r&&(o*=256);)this[e+i]=t/o&255;return e+r},u.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||C(this,t,e,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1
;for(this[e+o]=255&t;--o>=0&&(i*=256);)this[e+o]=t/i&255;return e+r},u.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),
this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):R(this,t,e,!0),e+2},
u.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):R(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,r){
return t=+t,e|=0,r||C(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):I(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,r){
return t=+t,e|=0,r||C(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):I(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,r,n){
if(t=+t,e|=0,!n){var o=Math.pow(2,8*r-1);C(this,t,e,r,o-1,-o)}var i=0,a=1,c=0;for(this[e]=255&t;++i<r&&(a*=256);)t<0&&0===c&&0!==this[e+i-1]&&(c=1),this[e+i]=(t/a>>0)-c&255;return e+r},
u.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var o=Math.pow(2,8*r-1);C(this,t,e,r,o-1,-o)}var i=r-1,a=1,c=0;for(this[e+i]=255&t;--i>=0&&(a*=256);)t<0&&0===c&&0!==this[e+i+1]&&(c=1),
this[e+i]=(t/a>>0)-c&255;return e+r},u.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},
u.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):R(this,t,e,!0),e+2},
u.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):R(this,t,e,!1),e+2},
u.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,
this[e+3]=t>>>24):I(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||C(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,
this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):I(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,r){return U(this,t,e,!0,r)},u.prototype.writeFloatBE=function(t,e,r){return U(this,t,e,!1,r)
},u.prototype.writeDoubleLE=function(t,e,r){return F(this,t,e,!0,r)},u.prototype.writeDoubleBE=function(t,e,r){return F(this,t,e,!1,r)},u.prototype.copy=function(t,e,r,n){if(r||(r=0),
n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds")
;if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r)
;var o,i=n-r
;if(this===t&&r<e&&e<n)for(o=i-1;o>=0;--o)t[o+e]=this[o+r];else if(i<1e3||!u.TYPED_ARRAY_SUPPORT)for(o=0;o<i;++o)t[o+e]=this[o+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+i),e);return i
},u.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}
if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255)
;if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),
"number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{var a=u.isBuffer(t)?t:D(new u(t,n).toString()),c=a.length;for(i=0;i<r-e;++i)this[i+e]=a[i%c]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function G(t){
return t<16?"0"+t.toString(16):t.toString(16)}function D(t,e){var r;e=e||1/0;for(var n=t.length,o=null,i=[],a=0;a<n;++a){if((r=t.charCodeAt(a))>55295&&r<57344){if(!o){if(r>56319){
(e-=3)>-1&&i.push(239,191,189);continue}if(a+1===n){(e-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)
}else o&&(e-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break
;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function M(t){
return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(B,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function z(t,e,r,n){
for(var o=0;o<n&&!(o+r>=e.length||o>=t.length);++o)e[o+r]=t[o];return o}}).call(this,r(27))},,function(t,e,r){t.exports=r(20)},function(t,e,r){function n(t){
return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){
return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}
var o=r(21),i="undefined"!=typeof document,a=((o?o.uri:i&&(document.currentScript||Array.prototype.slice.call(document.getElementsByTagName("script"),-1)[0]||{}).src)||"").toString()
;"/3.0.0/"===(a=a.split(/\//).slice(0,-1).join("/")+"/").substr(-"/3.0.0/".length)&&(a=a.substr(0,a.length-"/3.0.0/".length)+"/3.7.5/"),r.p=a,t.exports=r(22);var c=t.exports
;c&&"object"===n(c)&&("version"in c||(c.version="3.7.5"),"name"in c||(c.name="uu_appg01_oidc".split(/[\/\\]/).pop()),"namespace"in c||(c.namespace="UuApp.Oidc"))},function(t,r){t.exports=e
},function(t,e,r){"use strict";String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value:function(t,e){return e=!e||e<0?0:+e,this.substring(e,e+t.length)===t}})
;var n,o=!1;if(t.exports={get AuthenticationService(){return r(23)},get Session(){var e=r(10);return o||(o=!0,r(43).wrapClass(e,t.exports.AuthenticationService)),e},get Internal(){return{
get OAuthClient(){return r(13)},get AbstractAuthorizationFlow(){return r(6)},get ImplicitFlow(){return r(8)},get CodeFlow(){return r(12)}}},get OidcAuthenticationService(){
return this.AuthenticationService},get OidcSession(){return this.Session}},window.UuOidc||(window.UuOidc={Session:t.exports.Session}),window.history&&window.history.replaceState){
var i=location.href.match(/[?&]?access_token=([^&#]+)/);if(i){n=i[1];try{var a=location.href.replace(/([?&])access_token=[^&#]*(&)?/,(function(t,e,r){return r?e:""}))
;a!==location.href&&history.replaceState(history.state,"",a)}catch(t){}}}("interactive"===document.readyState||"complete"===document.readyState?Promise.resolve():new Promise((function(t){
document.addEventListener("DOMContentLoaded",t,!1)}))).then((function(){t.exports.AuthenticationService._onPageLoad(n)}))},function(t,e,r){"use strict";function n(t,e){return function(t){
if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,
0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return
}finally{if(s)throw o}}return c}}(t,e)||i(t,e)||function(){
throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){
var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=i(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){
return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}
throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,u=!1;return{s:function(){
r=r.call(t)},n:function(){var t=r.next();return c=t.done,t},e:function(t){u=!0,a=t},f:function(){try{c||null==r.return||r.return()}finally{if(u)throw a}}}}function i(t,e){if(t){
if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),
"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length)
;for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){
return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{}
;e%2?c(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(e){
Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function s(t,e,r){return(e=v(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t
}function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){
return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */f=function(){return t}
;var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value
},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,
enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function s(t,e,r,o){
var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),c=new P(o||[]);return n(a,"_invoke",{value:k(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{
type:"throw",arg:t}}}t.wrap=s;var p={};function d(){}function y(){}function v(){}var g={};u(g,i,(function(){return this}));var m=Object.getPrototypeOf,_=m&&m(m(L([])));_&&_!==e&&r.call(_,i)&&(g=_)
;var b=v.prototype=d.prototype=Object.create(g);function w(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){var o;n(this,"_invoke",{
value:function(n,i){function a(){return new e((function(o,a){!function n(o,i,a,c){var u=h(t[o],t,i);if("throw"!==u.type){var s=u.arg,f=s.value
;return f&&"object"==l(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){
return n("throw",t,a,c)}))}c(u.arg)}(n,i,o,a)}))}return o=o?o.then(a,a):a()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){
if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=S(a,r);if(c){
if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)
}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=h(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}
"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",
e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg)
;if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),
e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),
2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],
t.forEach(E,this),this.reset(!0)}function L(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){
for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=v,
n(b,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){
var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,
u(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(x.prototype),u(x.prototype,a,(function(){return this})),t.AsyncIterator=x,
t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),u(b,c,"Generator"),
u(b,i,(function(){return this})),u(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){
for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,
this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),
!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg
;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}
for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc")
;if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{
if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){
var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null)
;var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg
;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},
finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),p}},catch:function(t){
for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},
delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function h(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){
return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function p(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){
h(i,n,o,a,c,"next",t)}function c(t){h(i,n,o,a,c,"throw",t)}a(void 0)}))}}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e){
for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,v(n.key),n)}}function v(t){var e=function(t,e){
if("object"!==l(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==l(n))return n
;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===l(e)?e:String(e)}
var g=r(0),m=g.AuthenticationService,_=g.InvalidCredentials,b=r(1),w=b.Config,x=b.BaseError,k=r(3).LoggerFactory,S=r(2).AppClient,E=r(24),O=r(13),P=r(10),L=r(6),T=r(8),j=r(12),A=r(38),C=r(39),R=r(5),I=r(40),N=r(41),U=r(7),F=r(11),B="uu_app_oidc_providers_",G=/^[a-zA-Z0-9\-_]+\.[a-zA-Z0-9\-_]+\.[a-zA-Z0-9\-_]+$/,D=function(){
function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(d(this,t),!e)throw new x("Service name is not defined");if(this._serviceName=e,this._serviceUri=r.serviceUri,
!this._serviceUri)throw new x("There is no service URI defined for service ".concat(this._serviceName));this._oauthClient=null,
this._loadOauthClientPromise=this._loadOauthClient(this._serviceName,this._serviceUri,r),this._callTokenType=r.callTokenType,
this._emptySession=N.from(P._createEmptySession(),void 0,void 0,void 0,void 0,this),this._currentSession=this._emptySession,this._runningAuthnPromise=null,this._restoreSessionPromise=null,
this._isRestoringSession=!1,this._listeners=[],this._globalSessionExpiring=!1,this._defaultAcrValues=w.getString("uu_app_oidc_requested_acr_values",!1)||"low standard high veryHigh",
this._defaultMaxAge=w.getNumber("uu_app_oidc_max_authentication_age",!1),this._defaultScopeMode=w.getString(B+this._serviceName+"_default_call_token_scope_mode")||"baseUri",
this._logger=k.get("uuapp.oidc.AuthenticationService"),this._redirectUri=U.toFullAppUrl(w.getString("uu_app_oidc_redirect_uri")||"/oidc/callback"),this._authnFlow=null,
this._loadAuthnFlowPromise=this._loadAuthnFlow(),this._autoLogoutSupportInitialized=!1,this._autoTokenRefreshInitialized=!1,this._sessionExtendedAndExpiringSupportInitialized=!1,
this._sessionStateChangeNotifierInitialized=!1}var e,r,i,a,c,s,h,v,g,b,D,M,z,Y,V,H,q,W,K,J;return e=t,r=[{key:"getServiceName",value:function(){return this._serviceName}},{key:"getServiceUri",
value:(J=p(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._oauthClient){t.next=3;break}return t.next=3,this._loadOauthClientPromise;case 3:
return t.next=5,this._oauthClient.getIssuerList();case 5:return t.abrupt("return",t.sent[0]);case 6:case"end":return t.stop()}}),t,this)}))),function(){return J.apply(this,arguments)})},{
key:"getProviderUri",value:function(){return this._serviceUri}},{key:"getCurrentSession",value:function(){return this._currentSession}},{key:"restoreSession",value:(K=p(f().mark((function t(){
var e,r,n,o,i,a,c,u,s,l=this,h=arguments;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=h.length>0&&void 0!==h[0]?h[0]:{},this._restoreSessionPromise){t.next=11;break}
return this._isRestoringSession=!0,this._logger.debug("Trying to restore session for ".concat(this.getServiceName(),".")),n=(r=e||{}).acrValues,o=r.maxAge,i=r.callToken,t.next=7,
R.getClientId(this._serviceName);case 7:
a=t.sent,(c=N.loadFromCache(this,a))&&c.matches(n||this._defaultAcrValues,o||this._defaultMaxAge)?(this._logger.debug("Session for ".concat(this.getServiceName()," loaded from cache.")),
u=this._authenticateBySession.bind(this),
s=c):i?(this._logger.warn("Trying to initialize session by access_token for ".concat(this.getServiceName(),". This method is deprecated and is going to be removed!")),
u=this._authenticateByCallToken.bind(this),s=i):(u=this._restoreSession.bind(this),s={acrValues:n,maxAge:o}),this._restoreSessionPromise=u(s).then((function(t){
return l._logger.debug("Session for ".concat(l.getServiceName()," restored.")),l._isRestoringSession=!1,t}),(function(t){
return t&&(t.code&&t.code.match(/(interaction|login|account_selection|consent)_required/i)||t.message&&t.message.match(/interaction required/i))?l._logger.debug("Restore of session for ".concat(l.getServiceName()," failed, user interaction is required (").concat(t.code,").")):l._logger.error("Restore of session for ".concat(l.getServiceName()," failed."),t),
l._isRestoringSession=!1,l._currentSession}));case 11:return t.abrupt("return",this._restoreSessionPromise);case 12:case"end":return t.stop()}}),t,this)}))),function(){return K.apply(this,arguments)})
},{key:"isRestoringSession",value:function(){return this._isRestoringSession}},{key:"checkSession",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0]
;return t&&this._currentSession&&this._currentSession.isAuthenticated()?this._silentTokenRefresh(!0):this._sessionChecker&&this._sessionChecker._checkState(),null}},{key:"authenticate",
value:(W=p(f().mark((function t(e){var r,n,o,i,a,c,u,s=arguments;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=s.length>1&&void 0!==s[1]?s[1]:null,
!this._runningAuthnPromise||!this._equalsArray(this._runningAuthnArgs,Array.prototype.slice.call(s))){t.next=5;break}
return(n=this._runningAuthnPromise.uiComponent)&&"function"==typeof n.focus&&n.focus(),t.abrupt("return",this._runningAuthnPromise);case 5:if(this._oauthClient){t.next=8;break}return t.next=8,
this._loadOauthClientPromise;case 8:if(!e||!e.os8Token){t.next=12;break}o=new C(this._oauthClient,this._serviceName,this._redirectUri),t.next=16;break;case 12:if(this._authnFlow){t.next=15;break}
return t.next=15,this._loadAuthnFlowPromise;case 15:o=this._authnFlow;case 16:return i=e&&e.scopeMode?e.scopeMode:this._defaultScopeMode,
r&&0!=r.length||"none"===i||(r=(r=U.canonicalAppBaseUri||U.appBaseUri).replace(/\/$/,"")),t.prev=18,this._runningAuthnArgs=Array.prototype.slice.call(s),this._runningAuthnPromise=o.authenticate(e,r),
t.next=23,this._runningAuthnPromise;case 23:return a=t.sent,t.next=26,this._oauthClient.getSupportedAcrValues();case 26:return c=t.sent,
u=new P(this._serviceName,this._oauthClient,c,a.claims,a.idToken,a.accessToken),(u=N.from(u,a.authenticationContext,a.globalSessionExpiresAt,a.globalSessionState,this))._authConstraints={
scope:a.scope,acrValues:a.acrValues,maxAge:a.maxAge},this._currentSession=u,this._initHandlers(),u&&(u._onCloseListener=this._onSessionClose.bind(this),u.storeToCache(a.clientId)),
this._triggerEvent("sessionChanged",u),t.abrupt("return",u);case 35:return t.prev=35,this._runningAuthnArgs=[],this._runningAuthnPromise=null,t.finish(35);case 39:case"end":return t.stop()}
}),t,this,[[18,,35,39]])}))),function(t){return W.apply(this,arguments)})},{key:"isAuthenticating",value:function(){return!!this._runningAuthnPromise}},{key:"addListener",value:function(t,e){
var r=this._listeners[t];return r||(r=this._listeners[t]=[]),r.push(e),this.removeListener.bind(this,t,e)}},{key:"removeListener",value:function(t,e){var r=this._listeners[t];if(!r)return!1
;var n=r.indexOf(e);return-1!=n&&r.splice(n,1),-1!=n}},{key:"isSessionExpiring",value:function(){return this._globalSessionExpiring}},{key:"_loadAsyncData",value:(q=p(f().mark((function t(){
return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._oauthClient){t.next=3;break}return t.next=3,this._loadOauthClientPromise;case 3:return t.next=5,
this._oauthClient.getMetadata();case 5:return t.next=7,R.getClientId(this._serviceName);case 7:case"end":return t.stop()}}),t,this)}))),function(){return q.apply(this,arguments)})},{
key:"_loadOauthClient",value:(H=p(f().mark((function t(e,r,n){var o;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:
if(w.getBoolean(B+e+"_mtls_enabled",!1)&&(n.mtlsGateway=w.get(B+e+"_mtls_gateway")),!(o=w.get(B+e+"_oauth_frontend_realization"))){t.next=25;break}if("string"!=typeof o){t.next=14;break}
return t.prev=5,t.next=8,SystemJS.import(o);case 8:o=t.sent,t.next=14;break;case 11:throw t.prev=11,t.t0=t.catch(5),new x("Unable to load custom oauth realization.",t.t0);case 14:
if("function"!=typeof o){t.next=18;break}this._oauthClient=new o(r,n),t.next=23;break;case 18:if("object"!==l(o)){t.next=22;break}this._oauthClient=o,t.next=23;break;case 22:
throw new x("Oauth realization '".concat(o,"' is not supported."));case 23:t.next=26;break;case 25:this._oauthClient=new O(r,n);case 26:case"end":return t.stop()}}),t,this,[[5,11]])}))),
function(t,e,r){return H.apply(this,arguments)})},{key:"_loadAuthnFlow",value:(V=p(f().mark((function t(){var e,r,n,o;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:
if(this._oauthClient){t.next=3;break}return t.next=3,this._loadOauthClientPromise;case 3:if(!(e=w.get("uu_app_oidc_authn_flow_override"))){t.next=26;break}if("string"!=typeof e){t.next=15;break}
return t.prev=6,t.next=9,SystemJS.import(e);case 9:e=t.sent,t.next=15;break;case 12:throw t.prev=12,t.t0=t.catch(6),new x("Unable to load authentication flow override.",t.t0);case 15:
if("function"!=typeof e){t.next=19;break}this._authnFlow=new e(this._oauthClient,this._serviceName,this._redirectUri,U.appBaseUri),t.next=24;break;case 19:if("object"!==l(e)){t.next=23;break}
this._authnFlow=e,t.next=24;break;case 23:throw new x("Authentication flow override '".concat(e,"' is not supported."));case 24:t.next=40;break;case 26:
if(r=w.getString(B+this._serviceName+"_authentication_type")||"implicit",n=w.getString(B+this._serviceName+"_session_crossdomain_strategy")||"cookie",o=w.getBoolean("uu_app_oidc_backend_available"),
"code"!==r||o||(this._logger.warn("Authentication type [code] requested, but no comatible backend found. Switching to [implicit]."),r="implicit"),"implicit"!==r){t.next=35;break}
"forward"===n&&this._logger.warn("Session crossdomain strategy set to [forward] which is not supported by authentication type [implicit]. Configuration is ignored."),
this._authnFlow=new T(this._oauthClient,this._serviceName,this._redirectUri,U.appBaseUri),t.next=40;break;case 35:if("code"!==r){t.next=39;break}
"forward"===n?w.getBoolean("uu_app_oidc_backend_grant_call_token_available")?this._authnFlow=new A(this._oauthClient,this._serviceName,this._redirectUri,U.appBaseUri):(this._logger.warn("Session crossdomain strategy set to [forward] which is not supported by application backend. Configuration is ignored."),
this._authnFlow=new j(this._oauthClient,this._serviceName,this._redirectUri,U.appBaseUri)):this._authnFlow=new j(this._oauthClient,this._serviceName,this._redirectUri,U.appBaseUri),t.next=40;break
;case 39:throw new x("Authentication type '".concat(r,"' is not supported."));case 40:case"end":return t.stop()}}),t,this,[[6,12]])}))),function(){return V.apply(this,arguments)})},{
key:"_restoreSession",value:(Y=p(f().mark((function t(e){var r,n,o,i,a,c,s=arguments;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:
if(!this._runningAuthnPromise||!this._equalsArray(this._runningAuthnArgs,Array.prototype.slice.call(s))){t.next=4;break}
return(r=this._runningAuthnPromise.uiComponent)&&"function"==typeof r.focus&&r.focus(),t.abrupt("return",this._runningAuthnPromise);case 4:if(this._oauthClient){t.next=7;break}return t.next=7,
this._loadOauthClientPromise;case 7:if(!e||!e.os8Token){t.next=11;break}n=new C(this._oauthClient,this._serviceName,this._redirectUri),t.next=15;break;case 11:if(this._authnFlow){t.next=14;break}
return t.next=14,this._loadAuthnFlowPromise;case 14:n=this._authnFlow;case 15:
return"none"!==(e&&e.scopeMode?e.scopeMode:this._defaultScopeMode)&&(o=(o=U.canonicalAppBaseUri||U.appBaseUri).replace(/\/$/,"")),t.prev=17,this._runningAuthnArgs=Array.prototype.slice.call(s),
n.restoreSession?this._runningAuthnPromise=n.restoreSession(e,o):(e=u({prompt:"none"},e),this._runningAuthnPromise=n.authenticate(e,o)),t.next=22,this._runningAuthnPromise;case 22:return i=t.sent,
t.next=25,this._oauthClient.getSupportedAcrValues();case 25:return a=t.sent,c=new P(this._serviceName,this._oauthClient,a,i.claims,i.idToken,i.accessToken),
(c=N.from(c,i.authenticationContext,i.globalSessionExpiresAt,i.globalSessionState,this))._authConstraints={scope:i.scope,acrValues:i.acrValues,maxAge:i.maxAge},this._currentSession=c,
this._initHandlers(),c&&(c._onCloseListener=this._onSessionClose.bind(this),c.storeToCache(i.clientId)),this._triggerEvent("sessionChanged",c),t.abrupt("return",c);case 34:return t.prev=34,
this._runningAuthnArgs=[],this._runningAuthnPromise=null,t.finish(34);case 38:case"end":return t.stop()}}),t,this,[[17,,34,38]])}))),function(t){return Y.apply(this,arguments)})},{
key:"_authenticateBySession",value:(z=p(f().mark((function t(e){var r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=p(f().mark((function t(){return f().wrap((function(t){
for(;;)switch(t.prev=t.next){case 0:return t.next=2,R.getClientId(this._serviceName);case 2:if(this._oauthClient){t.next=5;break}return t.next=5,this._loadOauthClientPromise;case 5:return t.next=7,
this._oauthClient.getSupportedAcrValues();case 7:return t.abrupt("return",{session:e,authCtx:e.getAuthenticationContext(),globalSessionExpiresAt:e.getExpiresAt(),globalSessionState:e.getState()})
;case 8:case"end":return t.stop()}}),t,this)}))).bind(this),t.prev=1,this._runningAuthnPromise=r(),t.next=5,this._runningAuthnPromise;case 5:return this._currentSession=e,this._initHandlers(),
e&&(e._onCloseListener=this._onSessionClose.bind(this)),this._triggerEvent("sessionChanged",e),t.abrupt("return",e);case 10:return t.prev=10,this._runningAuthnArgs=[],this._runningAuthnPromise=null,
t.finish(10);case 14:case"end":return t.stop()}}),t,this,[[1,,10,14]])}))),function(t){return z.apply(this,arguments)})},{key:"_authenticateByCallToken",value:(M=p(f().mark((function t(e){var r,n,o
;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=p(f().mark((function t(){var r,n,o,i,a,c,u,s;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:
if(this._oauthClient){t.next=3;break}return t.next=3,this._loadOauthClientPromise;case 3:if(!e.match(G)){t.next=10;break}return t.next=6,this._oauthClient.parseToken(e,this._callTokenType);case 6:
r=t.sent,"idToken"===this._callTokenType?(n=e,o=null):"accessToken"===this._callTokenType?(n=null,o=e):(n=e,o=null),t.next=17;break;case 10:return i=new S({baseUri:U.canonicalAppBaseUri||U.appBaseUri
}),a={authorization:"Bearer ".concat(e)},c={_:Date.now()},t.next=15,i.get("oidc/introspect",c,{headers:a});case 15:r=t.sent.data,"idToken"===this._callTokenType?(n=e,o=null):(this._callTokenType,
n=null,o=e);case 17:return t.next=19,this._oauthClient.getIssuerList();case 19:if(t.sent.includes(r.iss)){t.next=22;break}throw new _("Token is not trusted (unknown token issuer).");case 22:
return t.next=24,R.getClientId(this._serviceName);case 24:return t.next=26,this._oauthClient.getSupportedAcrValues();case 26:return u=t.sent,s=new P(this._serviceName,this._oauthClient,u,r,n,o),
(s=N.from(s,null,null,null,null,this)).getCallToken=p(f().mark((function t(){var e,r,n=arguments;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.length>0&&void 0!==n[0]&&n[0],
e=n.length>1&&void 0!==n[1]?n[1]:{},!(r=this._idToken||this._accessToken)){t.next=12;break}if(!0!==(!!e&&e.excludeAuthenticationType)){t.next=9;break}return t.abrupt("return",r);case 9:
return t.abrupt("return","Bearer ".concat(r));case 10:t.next=13;break;case 12:return t.abrupt("return",null);case 13:case"end":return t.stop()}}),t,this)}))).bind(s),s.close=p(f().mark((function t(){
return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.removeFromCache(),this._authenticated&&"function"==typeof this._onCloseListener&&this._onCloseListener(this),
this._authenticated=!1,this._idToken=null,this._accessToken=null;case 5:case"end":return t.stop()}}),t,this)}))).bind(s),t.abrupt("return",{session:s});case 32:case"end":return t.stop()}}),t,this)
}))).bind(this),t.prev=1,this._runningAuthnPromise=r(),t.next=5,this._runningAuthnPromise;case 5:return n=t.sent,o=n.session,this._currentSession=o,
o&&(o._onCloseListener=this._onSessionClose.bind(this)),this._triggerEvent("sessionChanged",o),t.abrupt("return",o);case 11:return t.prev=11,this._runningAuthnArgs=[],this._runningAuthnPromise=null,
t.finish(11);case 15:case"end":return t.stop()}}),t,this,[[1,,11,15]])}))),function(t){return M.apply(this,arguments)})},{key:"_initHandlers",value:function(){
this._autoLogoutSupportInitialized||(this._initAutoLogoutSupport(),this._autoLogoutSupportInitialized=!0),this._autoTokenRefreshInitialized||(this._initAutoTokenRefresh(),
this._autoTokenRefreshInitialized=!0),this._sessionExtendedAndExpiringSupportInitialized||(this._initSessionExtendedAndExpiringSupport(),this._sessionExtendedAndExpiringSupportInitialized=!0),
this._sessionStateChangeNotifierInitialized?this._sessionChecker&&this._sessionChecker.enable():(this._initSessionStateChangeNotifier(),this._sessionStateChangeNotifierInitialized=!0)}},{
key:"_initAutoLogoutSupport",value:function(){var t,e=this;this.addListener("sessionChanged",(function(r){if(t&&(clearTimeout(t),t=null),e._currentSession&&e._currentSession.isAuthenticated()){
var n=e._currentSession.getExpiresAt()||1e3*(e._currentSession.getAttribute("exp")||0);if(n){var o=Date.now(),i=Math.max(0,n-o)
;e._logger.debug("Planning local auto-logout at ".concat(e._toTimeString(new Date(o+i)),".")),t=setTimeout((function(){t=null,e._localLogout()}),i)}}}))}},{key:"_initAutoTokenRefresh",
value:function(){var t=this,e=w.getBoolean(B+this._serviceName+"_token_refresh_enabled");null==e&&(e=!0);var r=w.getNumber(B+this._serviceName+"_token_refresh_leeway");null==r&&(r=300)
;var n=w.getNumber(B+this._serviceName+"_token_refresh_failure_retry_interval");(null==n||n<0)&&(n=30),n&&(n=Math.max(5,n))
;var o,i=w.getNumber(B+this._serviceName+"_token_refresh_failure_retry_count");(null==i||i<0)&&(i=3),this._tokenRefreshInProgressCount=0,this._tokenRefreshFailureRetryInterval=n,
this._tokenRefreshFailureRetryCount=i,this._tokenRefreshFailureRetryTimer=null,this.addListener("sessionChanged",(function(n){if(e){o&&(clearTimeout(o),o=null)
;var i=t._currentSession&&t._currentSession.isAuthenticated()&&1e3*t._currentSession.getAttribute("exp");if(i){var a,c=Date.now(),u=i-c
;if(u<=0)return t._logger.warn("Received already expired token due to expired session - ending with local logout."),void t._localLogout()
;u<1e3*r?(t._logger.warn("Received token with unexpectedly short expiration time of ".concat(Math.floor(u/1e3),"s. Either session is ")+"nearing expiration, or current configuration of automatic token refresh is not suitable for used oidc provider."),
a=u-Math.floor(u/10)):a=u-1e3*r,a=Math.max(a,1e3),t._logger.debug("Planning token auto-refresh at ".concat(t._toTimeString(new Date(c+a)),".")),o=setTimeout((function(){o=null,t._silentTokenRefresh()
}),a)}}})),e&&(window.addEventListener("focus",(function(){return t.checkSession(!0)})),document.addEventListener("visibilitychange",(function(){
return"visible"===document.visibilityState&&t.checkSession(!0)})))}},{key:"_initSessionExtendedAndExpiringSupport",value:function(){
var t=this,e=w.getNumber(B+this._serviceName+"_session_extend_by_client_cert_failure_retry_interval");(null==e||e<0)&&(e=30),e&&(e=Math.max(5,e))
;var r,n=w.getNumber(B+this._serviceName+"_session_extend_by_client_cert_failure_retry_count");(null==n||n<0)&&(n=3),this._sessionExtendByClientCertFailureRetryInterval=e,
this._sessionExtendByClientCertFailureRetryCount=n,this.addListener("sessionChanged",(function(e){var n=t._currentSession.getExpiresAt()||0,o=r&&n>r+1e4;if(r=n,o){t._globalSessionExpiring=!1;var i=r
;setTimeout((function(){t._triggerEvent("sessionExtended",{expiresAt:i})}),0)}}));var o=w.getNumber(B+this._serviceName+"_session_expiring_notification_time");null==o&&(o=1800);var i,a=void 0
;this.addListener("sessionChanged",(function(e){if(!(o<=0)){i&&(clearTimeout(i),i=null)
;var r=t._currentSession&&t._currentSession.isAuthenticated()&&t._currentSession.getIdentity(),n=r&&r.getUuIdentity();n!=a&&(t._globalSessionExpiring=!1),a=n;var c=t._currentSession.getExpiresAt()
;if(c&&!t._globalSessionExpiring){var u=Date.now(),s=Math.max(0,c-u-1e3*o);t._logger.debug("Planning sessionExpiring notification at ".concat(t._toTimeString(new Date(u+s)),".")),
i=setTimeout(p(f().mark((function e(){return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=null,e.next=3,t._trySilentSessionExtendByClientCert();case 3:if(!e.sent){e.next=5;break}
return e.abrupt("return");case 5:t._globalSessionExpiring=!0,t._triggerEvent("sessionExpiring",{expiresAt:c});case 7:case"end":return e.stop()}}),e)}))),s)}}})),
this.addListener("sessionExpiring",(function(e){var r=e.data.expiresAt,n=Math.floor((r-Date.now())/2);n>5e3&&(i&&clearTimeout(i),i=setTimeout((function(){i=null,t._globalSessionExpiring=!0,
t._triggerEvent("sessionExpiring",{expiresAt:r})}),n))}))}},{key:"_initSessionStateChangeNotifier",value:(D=p(f().mark((function t(){var e,r,n=this;return f().wrap((function(t){
for(;;)switch(t.prev=t.next){case 0:if(null==(e=w.getNumber(B+this._serviceName+"_session_check_interval"))&&(e=5),t.t0=e,!t.t0){t.next=7;break}return t.next=6,
this._authnFlow.isCheckSessionSupported();case 6:t.t0=t.sent;case 7:if(!t.t0){t.next=14;break}return t.next=10,R.getClientId(this._serviceName);case 10:r=t.sent,
this._sessionChecker=new I(this._authnFlow,e,r,(function(){return n._currentSession.getState()})),this._sessionChecker.onStateChange((function(){n._logger.info("Session state change detected."),
n._silentTokenRefresh(!0)})),this._sessionChecker.onStateUnknown((function(){n._logger.info("Unexpected session loss detected."),n._triggerEvent("sessionLost")}));case 14:case"end":return t.stop()}
}),t,this)}))),function(){return D.apply(this,arguments)})},{key:"_triggerEvent",value:function(t,e){var r=this;this._logger.debug('Launching event "'.concat(t,'".'));var n=this._listeners[t];if(n){
var o={type:t,data:e};n.forEach((function(t){return t.call(r,o)}))}}},{key:"_onSessionClose",value:function(t){this._localLogout()}},{key:"_localLogout",value:function(){
this._logger.debug("Performing local-logout."),this._currentSession.removeFromCache(),this._currentSession!=this._emptySession&&(this._currentSession=this._emptySession,this._globalSessionExpiring=!1,
this._triggerEvent("sessionChanged",this._currentSession)),this._sessionChecker&&this._sessionChecker.disable(),this._tokenRefreshFailureRetryTimer&&(clearTimeout(this._tokenRefreshFailureRetryTimer),
this._tokenRefreshFailureRetryTimer=null)}},{key:"_silentTokenRefresh",value:(b=p(f().mark((function t(){var e,r,n=this,o=arguments;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:
if(!(o.length>0&&void 0!==o[0]&&o[0]&&(this._tokenRefreshFailureRetryTimer||this._tokenRefreshInProgressCount>0))){t.next=3;break}return t.abrupt("return");case 3:
return this._tokenRefreshFailureRetryTimer&&(clearTimeout(this._tokenRefreshFailureRetryTimer),this._tokenRefreshFailureRetryTimer=null),e=0,r=function(){var t=p(f().mark((function t(){
return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n._currentSession&&n._currentSession.isAuthenticated()){t.next=2;break}return t.abrupt("return");case 2:
return n._logger.debug("Silent token refresh - starting."),++n._tokenRefreshInProgressCount,t.prev=4,t.next=7,n._doAuthenticateRefresh();case 7:--n._tokenRefreshInProgressCount,t.next=14;break
;case 10:
t.prev=10,t.t0=t.catch(4),--n._tokenRefreshInProgressCount,n._tokenRefreshFailureRetryTimer?n._logger.debug("Silent token refresh - ending current run with no-op (operation ended with unexpected error and another retry is already planned).",t.t0):n._tokenRefreshFailureRetryCount&&e<n._tokenRefreshFailureRetryCount?(n._logger.debug("Silent token refresh - ended with unexpected error, will retry in ".concat(n._tokenRefreshFailureRetryInterval,"s."),t.t0),
n._tokenRefreshFailureRetryTimer=setTimeout((function(){++e,n._tokenRefreshFailureRetryTimer=null,r()
}),1e3*n._tokenRefreshFailureRetryInterval)):(n._logger.debug("Silent token refresh - ended with unexpected error (and no more retries are allowed). Logging out.",t.t0),n._localLogout());case 14:
case"end":return t.stop()}}),t,null,[[4,10]])})));return function(){return t.apply(this,arguments)}}(),t.next=8,r();case 8:case"end":return t.stop()}}),t,this)}))),function(){
return b.apply(this,arguments)})},{key:"_trySilentSessionExtendByClientCert",value:(g=p(f().mark((function t(){var e,r,n=this;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:
if(w.getBoolean(B+this._serviceName+"_mtls_enabled",!1)){t.next=2;break}return t.abrupt("return");case 2:return e=0,r=function(){var t=p(f().mark((function t(){var o,i,a;return f().wrap((function(t){
for(;;)switch(t.prev=t.next){case 0:return n._logger.debug("Silent Session extend by Client Certificate - starting."),t.prev=1,o=n._currentSession.getAuthenticationTime().getTime()/1e3,
i=Date.now()/1e3,a=Math.round(i-o-5),t.next=7,n.authenticate({prompt:"none",maxAge:a});case 7:return n._logger.debug("Silent Session extend by Client Certificate - Session was extended"),
t.abrupt("return",!0);case 11:if(t.prev=11,t.t0=t.catch(1),!(n._sessionExtendByClientCertFailureRetryCount&&e<n._sessionExtendByClientCertFailureRetryCount)){t.next=21;break}
return n._logger.debug("Silent Session extend by Client Certificate - ended with unexpected error, will retry in ".concat(n._sessionExtendByClientCertFailureRetryInterval,"s."),t.t0),t.next=17,
n._waitFor(1e3*n._sessionExtendByClientCertFailureRetryInterval);case 17:return++e,t.abrupt("return",r());case 21:
return n._logger.debug("Silent Session extend by Client Certificate - ended with unexpected error (and no more retries are allowed).",t.t0),t.abrupt("return",!1);case 23:case"end":return t.stop()}
}),t,null,[[1,11]])})));return function(){return t.apply(this,arguments)}}(),t.next=6,r();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)}))),function(){
return g.apply(this,arguments)})},{key:"_waitFor",value:function(t){return new Promise((function(e,r){setTimeout((function(){e()}),t)}))}},{key:"_equalsArray",value:function(t,e){
return t.length===e.length&&t.every((function(t,r){return t===e[r]}))}},{key:"_toTimeString",value:function(t){
return("0"+t.getHours()).substr(-2)+":"+("0"+t.getMinutes()).substr(-2)+":"+("0"+t.getSeconds()).substr(-2)}},{key:"_doAuthenticateRefresh",value:(v=p(f().mark((function t(){var e,r,n,o,i,a,c,u,s,l
;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,this._oauthClient){t.next=4;break}return t.next=4,this._loadOauthClientPromise;case 4:if(this._authnFlow){t.next=7;break}
return t.next=7,this._loadAuthnFlowPromise;case 7:if(e=this._currentSession?this._currentSession._authConstraints:null,r=e?e.scope:null,n=e?e.acrValues:null,o=e?e.maxAge:null,
!this._authnFlow.refreshSession){t.next=17;break}return t.next=14,this._authnFlow.refreshSession({acrValues:n,maxAge:o},r);case 14:i=t.sent,t.next=20;break;case 17:return t.next=19,
this._authnFlow.authenticate({acrValues:n,maxAge:o,prompt:"none",usePopup:!1},r);case 19:i=t.sent;case 20:if(this._currentSession&&this._currentSession.isAuthenticated()){t.next=24;break}
this._logger.debug("Silent token refresh - ending with no-op (local session is already logged out)."),t.next=35;break;case 24:if(!this._currentSession||!this._currentSession._supportedAcrValues){
t.next=28;break}a=this._currentSession._supportedAcrValues,t.next=31;break;case 28:return t.next=30,this._oauthClient.getSupportedAcrValues();case 30:a=t.sent;case 31:
c=new P(this._serviceName,this._oauthClient,a,i.claims,i.idToken,i.accessToken),u=this._currentSession.getIdentity(),s=c.getIdentity(),
u&&s&&u.getUuIdentity()!==s.getUuIdentity()||(!u||!s)&&u!=s?(this._logger.debug("Silent token refresh - ending with local logout (user that is logged in on remote is different from the local one)."),
this._localLogout()):(this._logger.debug("Silent token refresh - ending with token renewed."),l=this._currentSession.getAuthenticationContext(),
(c=N.from(c,l,i.globalSessionExpiresAt,i.globalSessionState,this))._authConstraints=e,this._currentSession=c,c&&(c._onCloseListener=this._onSessionClose.bind(this),c.storeToCache(i.clientId)),
this._triggerEvent("sessionChanged",c));case 35:t.next=46;break;case 37:if(t.prev=37,t.t0=t.catch(0),!(t.t0 instanceof F)){t.next=44;break}
this._logger.debug("Silent token refresh ending with local logout, user interaction is required (".concat(t.t0.code,").")),this._localLogout(),t.next=46;break;case 44:
throw this._logger.error("Silent token refresh failed.",t.t0),t.t0;case 46:case"end":return t.stop()}}),t,this,[[0,37]])}))),function(){return v.apply(this,arguments)})}],i=[{key:"_onPageLoad",
value:(h=p(f().mark((function t(e){var r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._onPageLoadPromise||(this._onPageLoadFinished=!1,r=p(f().mark((function t(){var r
;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("disabled"===L.getRestoreSessionOnLoad()){t.next=6;break}return t.next=4,this.restoreSession({callToken:e});case 4:t.next=10;break
;case 6:if(!(r=this._providers[this._primaryProvider])){t.next=10;break}return t.next=10,r._loadAsyncData();case 10:this._onPageLoadFinished=!0;case 11:case"end":return t.stop()}}),t,this)
}))).bind(this),this._onPageLoadPromise=r()),t.abrupt("return",this._onPageLoadPromise);case 2:case"end":return t.stop()}}),t,this)}))),function(t){return h.apply(this,arguments)})},{key:"load",
value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];E.load(t,e)}},{key:"create",value:function(t){
var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.force||!1;if(r||!this._providers[t]){var n=new this(t,e);m._register(t,n),m._register("uu_appg01_oidc",this),this._providers[t]=n,
this._primaryProvider||(this._primaryProvider=t),this._restoreSessionPromise=null,this._isRestoringSession=!1,this._logger=k.get("uuapp.oidc.AuthenticationService")}}},{key:"authenticate",
value:(s=p(f().mark((function t(e){var r,n,o=arguments;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=o.length>1&&void 0!==o[1]?o[1]:null,
this._onPageLoadPromise||this._onPageLoad(null),this._onPageLoadFinished){t.next=5;break}return t.next=5,this._onPageLoadPromise;case 5:return n=this._providers[this._primaryProvider],t.next=8,
n.authenticate(e,r);case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"isAuthenticating",value:function(){
var t=this._providers[this._primaryProvider];return t?t.isAuthenticating():null}},{key:"getServiceName",value:function(){var t=this._providers[this._primaryProvider];return t?t.getServiceName():null}
},{key:"getServiceUri",value:(c=p(f().mark((function t(){var e;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=this._providers[this._primaryProvider])){t.next=7;break}
return t.next=4,e.getServiceUri();case 4:t.t0=t.sent,t.next=8;break;case 7:t.t0=null;case 8:return t.abrupt("return",t.t0);case 9:case"end":return t.stop()}}),t,this)}))),function(){
return c.apply(this,arguments)})},{key:"getProviderUri",value:function(){var t=this._providers[this._primaryProvider];return t?t.getProviderUri():null}},{key:"getCurrentSession",value:function(){
var t=this._providers[this._primaryProvider];return t?t.getCurrentSession():null}},{key:"restoreSession",value:(a=p(f().mark((function t(){var e,r,i,a=arguments;return f().wrap((function(t){
for(;;)switch(t.prev=t.next){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:{},r=sessionStorage.getItem("uu_app_oidc_auth_referrer"),sessionStorage.removeItem("uu_app_oidc_auth_referrer"),
document.originalReferrer=r||"",this._restoreSessionPromise||(this._isRestoringSession=!0,i=p(f().mark((function t(){var r,i,a,c,u,s,l,h,p,d,y,v,g,m,_,b;return f().wrap((function(t){
for(;;)switch(t.prev=t.next){case 0:if(null==(r=w.getBoolean("uu_app_oidc_secondary_providers_enabled"))&&(r=!1),r&&1!==Object.keys(this._providers).length){t.next=12;break}return t.prev=3,t.next=6,
this._providers[this._primaryProvider].restoreSession(e);case 6:return t.abrupt("return",t.sent);case 7:return t.prev=7,this._isRestoringSession=!1,t.finish(7);case 10:t.next=54;break;case 12:
for(this._logger.debug("Trying to restore session for any available authentication service."),(i=[]).push(this._providers[this._primaryProvider]),a=0,
c=Object.values(this._providers);a<c.length;a++)(u=c[a]).getServiceName()!==this._primaryProvider&&i.push(u);s=[],l=null,h=this._primaryProvider,p=0,d=i;case 20:if(!(p<d.length)){t.next=39;break}
return y=d[p],this._primaryProvider=y.getServiceName(),t.prev=23,t.next=26,y.restoreSession(e);case 26:if(!(l=t.sent).getIdentity()||!l.getIdentity().getUuIdentity()){t.next=30;break}
return this._logger.debug("Setting ".concat(y.getServiceName()," as default service.")),t.abrupt("break",39);case 30:t.next=35;break;case 32:t.prev=32,t.t0=t.catch(23),
s.push([y.getServiceName(),t.t0]);case 35:this._primaryProvider=h;case 36:p++,t.next=20;break;case 39:if(l.getIdentity()){t.next=52;break}
if(this._logger.debug("No existing session found, keeping ".concat(this._primaryProvider," as default service.")),!(s.length>0)){t.next=48;break}v=o(s);try{for(v.s();!(g=v.n()).done;)m=n(g.value,2),
_=m[0],b=m[1],this._logger.error("Authentication with ".concat(_," failed."),b)}catch(t){v.e(t)}finally{v.f()}throw this._isRestoringSession=!1,s.pop()[1];case 48:return this._isRestoringSession=!1,
t.abrupt("return",l);case 50:t.next=54;break;case 52:return this._isRestoringSession=!1,t.abrupt("return",l);case 54:case"end":return t.stop()}}),t,this,[[3,,7,10],[23,32]])}))).bind(this),
this._restoreSessionPromise=i()),t.abrupt("return",this._restoreSessionPromise);case 6:case"end":return t.stop()}}),t,this)}))),function(){return a.apply(this,arguments)})},{key:"isRestoringSession",
value:function(){return this._isRestoringSession}},{key:"addListener",value:function(t,e){for(var r=[],n=0,o=Object.values(this._providers);n<o.length;n++){var i=o[n];r.push(i.addListener(t,e))}
return function(){for(var t=0,e=r;t<e.length;t++)(0,e[t])()}}},{key:"removeListener",value:function(t,e){for(var r=0,n=Object.values(this._providers);r<n.length;r++)n[r].removeListener(t,e)}},{
key:"isSessionExpiring",value:function(){var t=this._providers[this._primaryProvider];return t?t.isSessionExpiring():null}}],r&&y(e.prototype,r),i&&y(e,i),Object.defineProperty(e,"prototype",{
writable:!1}),t}();D._providers={},D._primaryProvider=null,D.load(!1),t.exports=D},function(t,e,r){"use strict";function n(t){
return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){
return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,
o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){
var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),
"symbol"===n(a)?a:String(a)),o)}var i,a}
var i=r(1),a=i.Config,c=i.BaseError,u=r(0).AuthenticationService,s="uu_app_oidc_providers_",l="uu_app_oidc_disable_webcrypto_api",f="https://oidc.plus4u.net/uu-oidcg01-main/99923616732452117-4f06dafc03cb4c7f8c155aa53f0e86be",h="https://uuidentity.plus4u.net/uu-oidc-maing02/bb977a99f4cc4c37a2afce3fd599d0a7/oidc",p=function(){
function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"load",value:function(t){
var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e&&(Object.keys(t._providers).forEach((function(t){delete u._realizations[t]})),t._providers={},t._primaryProvider=null),
this.loadOidcg02(t,e),this.loadOidcg01(t,e);var r=null;if("undefined"==typeof window)r=a.toJSON();else{var n=a.chain._sources[0];r=Object.assign(n?n._data:{},a.chain._custom)}
for(var o=Object.keys(r),i=0;i<o.length;i+=1){var f=o[i],h=r[f],p=new RegExp("^".concat(s,"(.*)_uri$")).exec(f);if(p){var d=p[1],y="".concat(s).concat(d);if("oidcg01"!==d&&"oidcg02"!==d){
var v=a.getBoolean("".concat(y,"_enabled"),!1);if("boolean"!=typeof v||v){d=a.getString("".concat(y,"_name"),!1)||d;var g={serviceUri:h,verifySsl:a.getBoolean("".concat(y,"_verify_ssl"),!1),
accessTokenPattern:a.getString("".concat(y,"_access_token_pattern"),!1),refreshTokenPattern:a.getString("".concat(y,"_refresh_token_pattern"),!1),
verifyAudience:a.getBoolean("".concat(y,"_verify_audience"),!1),allowAudienceAlias:a.getBoolean("uu_app_oidc_allow_audience_alias",!1),tokenCacheSize:a.getNumber("".concat(y,"_token_cache_size"),!1),
tokenTimeLeeway:a.getNumber("".concat(y,"_token_time_leeway"),!1),discoveryPath:a.getNumber("".concat(y,"_discovery_path"),!1),discoveryCacheTtl:a.getNumber("".concat(y,"_discovery_cache_ttl"),!1),
jwksCacheTtl:a.getNumber("".concat(y,"_jwks_cache_ttl"),!1),defaultScope:a.getString("".concat(y,"_default_scope"),!1),perflogEnabled:a.getBoolean("".concat(y,"_perflog_enabled"),!1),
callTokenType:a.getString("".concat(y,"_call_token_type")),issuer:a.getString("".concat(y,"_issuer")),oauthRealization:a.getString("".concat(y,"_oauth_realization")),
disableWebcryptoApi:a.getBoolean(l,!1),force:e};t.create(d,g)}}}}var m=a.getString("uu_app_oidc_primary_provider",!1);if(m){
if(!t._providers[m])throw new c("Cannot set primary provider to ".concat(m,". Service does not exits or is not enabled."));t._primaryProvider=m}}},{key:"loadOidcg02",value:function(t){
var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r="".concat(s).concat("oidcg02"),n=a.getBoolean("".concat(r,"_enabled"),!1);if("boolean"!=typeof n&&(n=!0),n){
var o=a.getString("".concat(r,"_uri"),!1),i=a.getBoolean("".concat(r,"_verify_audience"),!1);null==i&&(i=!0);var c={force:e,serviceUri:o||h,verifySsl:a.getBoolean("".concat(r,"_verify_ssl"),!1),
accessTokenPattern:a.getString("".concat(r,"_access_token_pattern"),!1)||"^at.*",refreshTokenPattern:a.getString("".concat(r,"_refresh_token_pattern"),!1)||"^rt.*",verifyAudience:i,
allowAudienceAlias:a.getBoolean("uu_app_oidc_allow_audience_alias",!1),tokenCacheSize:a.getNumber("".concat(r,"_token_cache_size"),!1),
tokenTimeLeeway:a.getNumber("".concat(r,"_token_time_leeway"),!1),discoveryCacheTtl:a.getNumber("".concat(r,"_discovery_cache_ttl"),!1),jwksCacheTtl:a.getNumber("".concat(r,"_jwks_cache_ttl"),!1),
defaultScope:a.getString("".concat(r,"_default_scope"),!1),perflogEnabled:a.getBoolean("".concat(r,"_perflog_enabled"),!1),callTokenType:a.getString("".concat(r,"_call_token_type")),
issuer:a.getString("".concat(r,"_issuer")),oauthRealization:a.getString("".concat(r,"_oauth_realization")),disableWebcryptoApi:a.getBoolean(l,!1)};t.create("oidcg02",c)}}},{key:"loadOidcg01",
value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r="".concat(s).concat("oidcg01"),n=a.getBoolean("".concat(r,"_enabled"),!1);if("boolean"!=typeof n&&(n=!1),n){
var o=a.getString("".concat(r,"_uri"),!1),i=(a.getBoolean("".concat(r,"_verify_ssl"),!1),a.getBoolean("".concat(r,"_verify_audience"),!1));null==i&&(i=!1);var c={force:e,serviceUri:o||f,
verifySsl:a.getBoolean("".concat(r,"_verify_ssl"),!1),accessTokenPattern:a.getString("".concat(r,"_access_token_pattern"),!1)||"^UUOIDCAT-.*",
refreshTokenPattern:a.getString("".concat(r,"_refresh_token_pattern"),!1)||"^UUOIDCRT-.*",verifyAudience:i,allowAudienceAlias:a.getBoolean("uu_app_oidc_allow_audience_alias",!1),
tokenCacheSize:a.getNumber("".concat(r,"_token_cache_size"),!1),tokenTimeLeeway:a.getNumber("".concat(r,"_token_time_leeway"),!1),discoveryCacheTtl:a.getNumber("".concat(r,"_discovery_cache_ttl"),!1),
jwksCacheTtl:a.getNumber("".concat(r,"_jwks_cache_ttl"),!1),defaultScope:a.getString("".concat(r,"_default_scope"),!1),perflogEnabled:a.getBoolean("".concat(r,"_perflog_enabled"),!1),
callTokenType:a.getString("".concat(r,"_call_token_type")),issuer:a.getString("".concat(r,"_issuer")),oauthRealization:a.getString("".concat(r,"_oauth_realization")),
disableWebcryptoApi:a.getBoolean(l,!1)};t.create("oidcg01",c)}}}],(r=null)&&o(e.prototype,r),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports=p},function(t,e,r){"use strict"
;function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){
return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */o=function(){return t}
;var t={},e=Object.prototype,r=e.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value
},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,
enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function f(t,e,r,n){
var o=e&&e.prototype instanceof d?e:d,a=Object.create(o.prototype),c=new P(n||[]);return i(a,"_invoke",{value:k(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{
type:"throw",arg:t}}}t.wrap=f;var p={};function d(){}function y(){}function v(){}var g={};l(g,c,(function(){return this}));var m=Object.getPrototypeOf,_=m&&m(m(L([])));_&&_!==e&&r.call(_,c)&&(g=_)
;var b=v.prototype=d.prototype=Object.create(g);function w(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){var o;i(this,"_invoke",{
value:function(i,a){function c(){return new e((function(o,c){!function o(i,a,c,u){var s=h(t[i],t,a);if("throw"!==s.type){var l=s.arg,f=l.value
;return f&&"object"==n(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(f).then((function(t){l.value=t,c(l)}),(function(t){
return o("throw",t,c,u)}))}u(s.arg)}(i,a,o,c)}))}return o=o?o.then(c,c):c()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){
if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=S(a,r);if(c){
if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)
}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=h(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}
"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",
e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg)
;if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),
e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),
2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],
t.forEach(E,this),this.reset(!0)}function L(t){if(t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){
for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=v,
i(b,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:y,configurable:!0}),y.displayName=l(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){
var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,
l(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,
t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),l(b,s,"Generator"),
l(b,c,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){
for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,
this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),
!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg
;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}
for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc")
;if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{
if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){
var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null)
;var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg
;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},
finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),p}},catch:function(t){
for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},
delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function i(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){
return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var r=0;r<e.length;r++){
var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,e){if("object"!==n(t)||null===t)return t
;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}
return("string"===e?String:Number)(t)}(i,"string"),"symbol"===n(a)?a:String(a)),o)}var i,a}
var u=r(2).AppClient,s=r(1),l=s.BaseError,f=s.LruCache,h=r(2),p=h.PerflogHandler,d=h.RemoteErrorHandler,y=h.TransformParametersHandler,v=[p,d,y],g=[d,y],m=new f({maxSize:16,
localStorageKey:"uu_app_oidc_cache_discovery"}),_=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(a(this,t),!e)throw new l("Service URI must be defined")
;var n=r.discoveryPath||".well-known/openid-configuration";this._discoveryUri="".concat(e,"/").concat(n.replace(/^\//,"")),
this._discoveryCacheTtl=1e3*(r.discoveryCacheTtl?Number(r.discoveryCacheTtl):3600);var o="boolean"!=typeof r.perflogEnabled||r.perflogEnabled,i=o?v:g;this._client=new u(Object.assign(r,{interceptors:i
}))}var e,r,n,s,f;return e=t,(r=[{key:"getMetadata",value:(s=o().mark((function t(){var e,r,n,i=arguments;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:
if(e=i.length>0&&void 0!==i[0]&&i[0],(r=m.get(this._discoveryUri))&&!e){t.next=8;break}return t.next=5,this._client.get(this._discoveryUri);case 5:n=t.sent,r=n.data,
m.set(this._discoveryUri,r,this._discoveryCacheTtl);case 8:return t.abrupt("return",r);case 9:case"end":return t.stop()}}),t,this)})),f=function(){var t=this,e=arguments
;return new Promise((function(r,n){var o=s.apply(t,e);function a(t){i(o,r,n,a,c,"next",t)}function c(t){i(o,r,n,a,c,"throw",t)}a(void 0)}))},function(){return f.apply(this,arguments)})
}])&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports=_},function(t,e,r){"use strict";(function(e){function n(t){
return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){
return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */o=function(){return t}
;var t={},e=Object.prototype,r=e.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value
},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,
enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function f(t,e,r,n){
var o=e&&e.prototype instanceof d?e:d,a=Object.create(o.prototype),c=new P(n||[]);return i(a,"_invoke",{value:k(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{
type:"throw",arg:t}}}t.wrap=f;var p={};function d(){}function y(){}function v(){}var g={};l(g,c,(function(){return this}));var m=Object.getPrototypeOf,_=m&&m(m(L([])));_&&_!==e&&r.call(_,c)&&(g=_)
;var b=v.prototype=d.prototype=Object.create(g);function w(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){var o;i(this,"_invoke",{
value:function(i,a){function c(){return new e((function(o,c){!function o(i,a,c,u){var s=h(t[i],t,a);if("throw"!==s.type){var l=s.arg,f=l.value
;return f&&"object"==n(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(f).then((function(t){l.value=t,c(l)}),(function(t){
return o("throw",t,c,u)}))}u(s.arg)}(i,a,o,c)}))}return o=o?o.then(c,c):c()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){
if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=S(a,r);if(c){
if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)
}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=h(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}
"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",
e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg)
;if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),
e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),
2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],
t.forEach(E,this),this.reset(!0)}function L(t){if(t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){
for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=v,
i(b,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:y,configurable:!0}),y.displayName=l(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){
var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,
l(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,
t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),l(b,s,"Generator"),
l(b,c,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){
for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,
this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),
!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg
;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}
for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc")
;if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{
if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){
var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null)
;var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg
;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},
finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),p}},catch:function(t){
for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},
delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function i(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){
return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function a(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){
i(a,n,o,c,u,"next",t)}function u(t){i(a,n,o,c,u,"throw",t)}c(void 0)}))}}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){
for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,e){
if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o
;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===n(a)?a:String(a)),o)}var i,a}
var s="undefined"==typeof window?r(31):window.crypto,l=s&&s.subtle||s&&s.webcrypto&&s.webcrypto.subtle,f=r(0).InvalidCredentials,h=r(1),p=h.Base64,d=h.Json,y=r(32),v=/^[a-zA-Z0-9\-_]+\.[a-zA-Z0-9\-_]+\.[a-zA-Z0-9\-_]+$/,g={
name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},m=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(c(this,t),
!e)throw new BaseError("Instance of discovery must be provided");this._discovery=e,this._jwks=new y(this._discovery,r),this._customIssuer=r.issuer,
this._tokenTimeLeeway=r.tokenTimeLeeway?Number(r.tokenTimeLeeway):300,this._disableWebcryptoApi="boolean"==typeof r.disableWebcryptoApi&&r.disableWebcryptoApi}var n,i,h,m,_,b;return n=t,(i=[{
key:"parseToken",value:(b=a(o().mark((function t(e){var r,n,i,a,c,u=arguments;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=!(u.length>1&&void 0!==u[1])||u[1],
n=u.length>2&&void 0!==u[2]?u[2]:{},e&&e.match(v)){t.next=4;break}throw new f("Unsupported token format.");case 4:i=e.split("."),t.prev=5,a=d.parse(p.urlSafeDecode(i[0])),
c=d.parse(p.urlSafeDecode(i[1])),t.next=13;break;case 10:throw t.prev=10,t.t0=t.catch(5),new f("Parsing of token failed.",t.t0);case 13:if(!r){t.next=16;break}return t.next=16,
this._verifyToken(a,c,i,n);case 16:return t.abrupt("return",c);case 17:case"end":return t.stop()}}),t,this,[[5,10]])}))),function(t){return b.apply(this,arguments)})},{key:"createToken",
value:(_=a(o().mark((function t(n,i){var a,c,u,f,h,y;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a={alg:"RS256",typ:"JWT"},
c=p.urlSafeEncode(d.stringify(a))+"."+p.urlSafeEncode(d.stringify(n)),!l||this._disableWebcryptoApi){t.next=13;break}return i.includes("RSA PRIVATE KEY")&&(i=(i=s.createPrivateKey(i)).export({
format:"pem",type:"pkcs8"})),i=p.decode(i.split("\n").slice(1,-1).join(),"binary"),t.next=7,l.importKey("pkcs8",i,g,!0,["sign"]);case 7:return f=t.sent,t.next=10,l.sign(g,f,e.from(c));case 10:
u=t.sent,t.next=25;break;case 13:if("undefined"!=typeof window){t.next=18;break}h=r(15)("jsrsasign"),t.next=21;break;case 18:return t.next=20,r.e(0).then(r.t.bind(null,18,7));case 20:h=t.sent;case 21:
(y=new h.KJUR.crypto.Signature({alg:"SHA256withRSA"})).init(i),y.updateString(c),u=e.from(y.sign(),"hex");case 25:return t.abrupt("return",c+"."+p.urlSafeEncode(u));case 26:case"end":return t.stop()}
}),t,this)}))),function(t,e){return _.apply(this,arguments)})},{key:"isExpired",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null
;return e=null!=e?e:this._tokenTimeLeeway,t.exp&&t.exp<Date.now()/1e3-e}},{key:"verifyExpiration",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null
;if(this.isExpired(t,e))throw new f("Token is expired.")}},{key:"_verifyToken",value:(m=a(o().mark((function t(n,i,a){var c,u,s,h,d,y,v,m,_,b,w,x=arguments;return o().wrap((function(t){
for(;;)switch(t.prev=t.next){case 0:if(c=x.length>3&&void 0!==x[3]?x[3]:{},this.verifyExpiration(i,c&&c.leeway),u=c&&c.issuer){t.next=12;break}return t.next=6,this._discovery.getMetadata();case 6:
s=t.sent,u=[s.issuer],s.access_token_issuer&&u.push[s.access_token_issuer],this._customIssuer&&u.push[this._customIssuer],t.next=13;break;case 12:Array.isArray(u)||(u=[u]);case 13:
if(u.includes(i.iss)){t.next=15;break}throw new f("Unsupported issuer.");case 15:if(h=c&&c.publicKey){t.next=20;break}return t.next=19,this._jwks.getPublicKeyData(n.kid);case 19:h=t.sent;case 20:
if(h.alg){t.next=27;break}return t.next=24,this._discovery.getMetadata();case 24:(t.sent.id_token_signing_alg_values_supported||[])[0];case 27:if("RS256"==n.alg){t.next=29;break}
throw new f("Unexpected signature algorithm.");case 29:if(d=a[0]+"."+a[1],y=p.decode(a[2],"binary"),!l||this._disableWebcryptoApi){t.next=46;break}return t.prev=32,t.next=35,
l.importKey("jwk",h,g,!1,["verify"]);case 35:return m=t.sent,t.next=38,l.verify(g,m,y,e.from(d));case 38:v=t.sent,t.next=44;break;case 41:throw t.prev=41,t.t0=t.catch(32),
new f("Unable to verify signature.",t.t0);case 44:t.next=66;break;case 46:if("undefined"!=typeof window){t.next=51;break}b="jsrsasign",_=r(15)(b),t.next=54;break;case 51:return t.next=53,
r.e(0).then(r.t.bind(null,18,7));case 53:_=t.sent;case 54:t.prev=54,y=e.from(y).toString("hex"),h=_.KEYUTIL.getKey(h),(w=new _.KJUR.crypto.Signature({alg:"SHA256withRSA"})).init(h),w.updateString(d),
v=w.verify(y),t.next=66;break;case 63:throw t.prev=63,t.t1=t.catch(54),new f("Unable to verify signature.",t.t1);case 66:if(v){t.next=68;break}throw new f("Invalid token signature.");case 68:
case"end":return t.stop()}}),t,this,[[32,41],[54,63]])}))),function(t,e,r){return m.apply(this,arguments)})}])&&u(n.prototype,i),h&&u(n,h),Object.defineProperty(n,"prototype",{writable:!1}),t}()
;t.exports=m}).call(this,r(17).Buffer)},function(t,e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){
return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){
"object"===("undefined"==typeof window?"undefined":r(window))&&(n=window)}t.exports=n},function(t,e,r){"use strict";e.byteLength=function(t){var e=s(t),r=e[0],n=e[1];return 3*(r+n)/4-n},
e.toByteArray=function(t){var e,r,n=s(t),a=n[0],c=n[1],u=new i(function(t,e,r){return 3*(e+r)/4-r}(0,a,c)),l=0,f=c>0?a-4:a
;for(r=0;r<f;r+=4)e=o[t.charCodeAt(r)]<<18|o[t.charCodeAt(r+1)]<<12|o[t.charCodeAt(r+2)]<<6|o[t.charCodeAt(r+3)],u[l++]=e>>16&255,u[l++]=e>>8&255,u[l++]=255&e
;2===c&&(e=o[t.charCodeAt(r)]<<2|o[t.charCodeAt(r+1)]>>4,u[l++]=255&e);1===c&&(e=o[t.charCodeAt(r)]<<10|o[t.charCodeAt(r+1)]<<4|o[t.charCodeAt(r+2)]>>2,u[l++]=e>>8&255,u[l++]=255&e);return u},
e.fromByteArray=function(t){for(var e,r=t.length,o=r%3,i=[],a=0,c=r-o;a<c;a+=16383)i.push(l(t,a,a+16383>c?c:a+16383));1===o?(e=t[r-1],i.push(n[e>>2]+n[e<<4&63]+"==")):2===o&&(e=(t[r-2]<<8)+t[r-1],
i.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return i.join("")}
;for(var n=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,u=a.length;c<u;++c)n[c]=a[c],o[a.charCodeAt(c)]=c
;function s(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function l(t,e,r){
for(var o,i,a=[],c=e;c<r;c+=3)o=(t[c]<<16&16711680)+(t[c+1]<<8&65280)+(255&t[c+2]),a.push(n[(i=o)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return a.join("")}o["-".charCodeAt(0)]=62,
o["_".charCodeAt(0)]=63},function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,r,n,o){var i,a,c=8*o-n-1,u=(1<<c)-1,s=u>>1,l=-7,f=r?o-1:0,h=r?-1:1,p=t[e+f];for(f+=h,i=p&(1<<-l)-1,p>>=-l,l+=c;l>0;i=256*i+t[e+f],f+=h,l-=8);for(a=i&(1<<-l)-1,i>>=-l,
l+=n;l>0;a=256*a+t[e+f],f+=h,l-=8);if(0===i)i=1-s;else{if(i===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),i-=s}return(p?-1:1)*a*Math.pow(2,i-n)},e.write=function(t,e,r,n,o,i){
var a,c,u,s=8*i-o-1,l=(1<<s)-1,f=l>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,d=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,
a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=l?(c=0,a=l):a+f>=1?(c=(e*u-1)*Math.pow(2,o),
a+=f):(c=e*Math.pow(2,f-1)*Math.pow(2,o),a=0));o>=8;t[r+p]=255&c,p+=d,c/=256,o-=8);for(a=a<<o|c,s+=o;s>0;t[r+p]=255&a,p+=d,a/=256,s-=8);t[r+p-d]|=128*y}},function(t,e){var r={}.toString
;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e){},function(t,e,r){"use strict";function n(t){
return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){
return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */o=function(){return t}
;var t={},e=Object.prototype,r=e.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value
},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,
enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function f(t,e,r,n){
var o=e&&e.prototype instanceof d?e:d,a=Object.create(o.prototype),c=new P(n||[]);return i(a,"_invoke",{value:k(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{
type:"throw",arg:t}}}t.wrap=f;var p={};function d(){}function y(){}function v(){}var g={};l(g,c,(function(){return this}));var m=Object.getPrototypeOf,_=m&&m(m(L([])));_&&_!==e&&r.call(_,c)&&(g=_)
;var b=v.prototype=d.prototype=Object.create(g);function w(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){var o;i(this,"_invoke",{
value:function(i,a){function c(){return new e((function(o,c){!function o(i,a,c,u){var s=h(t[i],t,a);if("throw"!==s.type){var l=s.arg,f=l.value
;return f&&"object"==n(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(f).then((function(t){l.value=t,c(l)}),(function(t){
return o("throw",t,c,u)}))}u(s.arg)}(i,a,o,c)}))}return o=o?o.then(c,c):c()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){
if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=S(a,r);if(c){
if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)
}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=h(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}
"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",
e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg)
;if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),
e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),
2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],
t.forEach(E,this),this.reset(!0)}function L(t){if(t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){
for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=v,
i(b,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:y,configurable:!0}),y.displayName=l(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){
var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,
l(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,
t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),l(b,s,"Generator"),
l(b,c,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){
for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,
this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),
!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg
;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}
for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc")
;if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{
if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){
var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null)
;var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg
;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},
finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),p}},catch:function(t){
for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},
delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function i(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){
return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function a(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){
i(a,n,o,c,u,"next",t)}function u(t){i(a,n,o,c,u,"throw",t)}c(void 0)}))}}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){
for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,e){
if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o
;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===n(a)?a:String(a)),o)}var i,a}
var s=r(1),l=s.BaseError,f=s.LruCache,h=r(2).AppClient,p=r(0).InvalidCredentials,d=r(2),y=d.PerflogHandler,v=d.RemoteErrorHandler,g=d.TransformParametersHandler,m=[y,v,g],_=[v,g],b=new f({maxSize:16,
localStorageKey:"uu_app_oidc_cache_jwks"}),w=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(c(this,t),
!e)throw new l("Instance of discovery must be provided");this._discovery=e,this._jwksCacheTtl=1e3*(r.jwksCacheTtl?Number(r.jwksCacheTtl):3600)
;var n="boolean"!=typeof r.perflogEnabled||r.perflogEnabled,o=n?m:_;this._client=new h(Object.assign(r,{interceptors:o}))}var e,r,n,i,s;return e=t,(r=[{key:"getPublicKeyData",
value:(s=a(o().mark((function t(e){var r,n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getPublicKeySet();case 2:if(r=t.sent,n=r&&r.keys.find((function(t){
return t.kid===e}))){t.next=17;break}return t.next=7,this.getPublicKeySet(!0);case 7:if(r=t.sent,n=r&&r.keys.find((function(t){return t.kid===e}))){t.next=17;break}return t.t0=p,
t.t1="Unable to obtain public JWK key with jwk_id=".concat(e," from "),t.next=14,this._discovery.getMetadata();case 14:throw t.t2=t.sent.issuer,t.t3=t.t1.concat.call(t.t1,t.t2,"."),new t.t0(t.t3)
;case 17:return t.abrupt("return",n);case 18:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"getPublicKeySet",value:(i=a(o().mark((function t(){
var e,r,n,i,a=arguments;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=a.length>0&&void 0!==a[0]&&a[0],t.next=3,this._discovery.getMetadata();case 3:if(r=t.sent,n=r.issuer,
(i=b.get(n))&&!e){t.next=11;break}return t.next=9,this._client.get(r.jwks_uri);case 9:i=t.sent.data,b.set(n,i,this._jwksCacheTtl);case 11:return t.abrupt("return",i);case 12:case"end":return t.stop()}
}),t,this)}))),function(){return i.apply(this,arguments)})}])&&u(e.prototype,r),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports=w},function(t,e,r){"use strict"
;function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){
return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){
if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name)
;if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r)
;var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}
throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,u=!1;return{s:function(){
r=r.call(t)},n:function(){var t=r.next();return c=t.done,t},e:function(t){u=!0,a=t},f:function(){try{c||null==r.return||r.return()}finally{if(u)throw a}}}}function i(t,e){
(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function a(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,
"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default")
;if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===n(a)?a:String(a)),o)}var i,a}
var c=r(1).Config,u=new RegExp("^https?://.*"),s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),
this._localDomainReplaceEnabled=c.getBoolean("uu_app_oidc_local_domain_scope_replace_enabled"),
null==this._localDomainReplaceEnabled&&(this._localDomainReplaceEnabled=c.isProfileActive("development","test")),
this._localDomainReplaceEnabled&&(this._localDomainList=(c.getString("uu_app_oidc_local_domain_list")||"localhost,127.0.0.1").split(",").map((function(t){
return new RegExp("^https?://".concat(t.trim(),"(:\\d{1,5})?($|/)"))})),this._localDomainScope=c.getString("uu_app_oidc_local_domain_call_token_scope")||"https:// http://")}var e,r,n;return e=t,(r=[{
key:"transformScope",value:function(t){var e=this;if(!this._localDomainReplaceEnabled)return t;var r,n=[],i=[],a=o(t.split(" "));try{var c=function(){var t=r.value
;t.match(u)?e._localDomainList.find((function(e){return t.match(e)}))||i.push(t):n.push(t)};for(a.s();!(r=a.n()).done;)c()}catch(t){a.e(t)}finally{a.f()}
return i.length>0?t:"".concat(n.join(" ")," ").concat(this._localDomainScope)}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports=new s},function(t,e,r){
"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){
return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */o=function(){return t}
;var t={},e=Object.prototype,r=e.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value
},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,
enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function f(t,e,r,n){
var o=e&&e.prototype instanceof d?e:d,a=Object.create(o.prototype),c=new P(n||[]);return i(a,"_invoke",{value:k(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{
type:"throw",arg:t}}}t.wrap=f;var p={};function d(){}function y(){}function v(){}var g={};l(g,c,(function(){return this}));var m=Object.getPrototypeOf,_=m&&m(m(L([])));_&&_!==e&&r.call(_,c)&&(g=_)
;var b=v.prototype=d.prototype=Object.create(g);function w(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){var o;i(this,"_invoke",{
value:function(i,a){function c(){return new e((function(o,c){!function o(i,a,c,u){var s=h(t[i],t,a);if("throw"!==s.type){var l=s.arg,f=l.value
;return f&&"object"==n(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(f).then((function(t){l.value=t,c(l)}),(function(t){
return o("throw",t,c,u)}))}u(s.arg)}(i,a,o,c)}))}return o=o?o.then(c,c):c()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){
if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=S(a,r);if(c){
if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)
}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=h(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}
"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",
e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg)
;if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),
e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),
2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],
t.forEach(E,this),this.reset(!0)}function L(t){if(t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){
for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=v,
i(b,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:y,configurable:!0}),y.displayName=l(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){
var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,
l(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,
t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),l(b,s,"Generator"),
l(b,c,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){
for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,
this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),
!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg
;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}
for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc")
;if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{
if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){
var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null)
;var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg
;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},
finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),p}},catch:function(t){
for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},
delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function i(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){
return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function a(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){
i(a,n,o,c,u,"next",t)}function u(t){i(a,n,o,c,u,"throw",t)}c(void 0)}))}}function c(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,
"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default")
;if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===n(a)?a:String(a)),o)}var i,a}
function u(t,e){return(u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=function(){
if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{
return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=f(t);if(e){var o=f(this).constructor
;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return l(this,r)}}function l(t,e){if(e&&("object"===n(e)||"function"==typeof e))return e
;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){
if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){
return t.__proto__||Object.getPrototypeOf(t)})(t)}var h=r(0).Session,p=r(0).Identity,d=r(0).ClientIdentity,y=r(0).ApplicationIdentity,v=function(t){!function(t,e){
if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}
}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u(t,e)}(h,t);var e,r,n,i,l,f=s(h);function h(){return function(t,e){
if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),f.call(this,{authenticationTime:new Date(Date.now()),authenticationLevelOfAssurance:0,identity:new p(null),
clientIdentity:new d(null),applicationIdentity:new y(null),attributes:{}})}return e=h,(r=[{key:"getServiceName",value:function(){return null}},{key:"getServiceUri",value:(l=a(o().mark((function t(){
return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null);case 1:case"end":return t.stop()}}),t)}))),function(){return l.apply(this,arguments)})},{
key:"getProviderUri",value:function(){return null}},{key:"getCallToken",value:(i=a(o().mark((function t(e){var r=arguments;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:
return r.length>1&&void 0!==r[1]&&r[1],t.abrupt("return",null);case 2:case"end":return t.stop()}}),t)}))),function(t){return i.apply(this,arguments)})}])&&c(e.prototype,r),n&&c(e,n),
Object.defineProperty(e,"prototype",{writable:!1}),h}(h);t.exports=v},function(t,e,r){var n=r(16),o=function t(e){var r=Object.assign({},e),o={loginWindow:null,closeCheckInterval:null}
;n.registerForCallback(this,o),this.finalize=function(t){this.finalize=function(){},this.destroy(),r.onResult&&r.onResult(t)}.bind(this);var i=function(){
o.loginWindow&&o.loginWindow.closed&&this.finalize(!1)}.bind(this);this.render=function(){var e=this;if(!o.loginWindow){var n={width:r.width||599,height:r.height||600}
;n.left=(screen.availWidth-n.width)/2+(screen.availLeft||0),n.top=(screen.availHeight-n.height)/2+(screen.availTop||0),
o.loginWindow=window.open(r.url,"_blank","toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes,copyhistory=no,width=".concat(n.width,",height=").concat(n.height,",top=").concat(n.top,",left=").concat(n.left)),
o.loginWindow?o.closeCheckInterval=setInterval(i.bind(this),200):Promise.resolve().then((function(){return e.finalize(t.ERROR_POPUP_BLOCKED)}))}},this.focus=function(){
o.loginWindow&&o.loginWindow.focus()},this.destroy=function(){o.loginWindow&&!o.loginWindow.closed&&o.loginWindow.close(),o.closeCheckInterval&&clearInterval(o.closeCheckInterval),
this.destroy=function(){},n.unregisterForCallback(this)}};o.ERROR_POPUP_BLOCKED="POPUP_BLOCKED",t.exports=o},function(t,e,r){var n=r(16);t.exports=function(t){var e=Object.assign({},t),r={iframe:null}
;Object.defineProperty(r,"loginWindow",{get:function(){try{return null!=r.iframe?r.iframe.contentWindow:null}catch(t){}return null}}),n.registerForCallback(this,r),this.finalize=function(t){
this.finalize=function(){},this.destroy(),e.onResult&&e.onResult(t)}.bind(this),this.render=function(){var t=this;if(!r.iframe){
var n=new Error("Server did not provide expected callback HTML page. Check if requested URL "+e.url+" contains proper redirect parameter. If so, look also into network console for possible callback response error.")
;r.iframe=document.createElement("iframe"),r.iframe.style.cssText="position: absolute;top: -300px; left: -300px; width: 200px; height: 200px; opacity: 0;",r.iframe.src=e.url,
r.iframe.onload=function(){return t.finalize(n)},r.iframe.onerror=function(){return t.finalize(n)},document.body.appendChild(r.iframe),e.timeout&&(this._timeout=setTimeout((function(){
t.finalize(new Error("OIDC iframe didn't receive callback within "+e.timeout+"s."))}),1e3*e.timeout))}},this.destroy=function(){
r.iframe&&r.iframe.parentNode&&r.iframe.parentNode.removeChild(r.iframe),this.destroy=function(){},this._timeout&&clearTimeout(this._timeout),n.unregisterForCallback(this)}}},function(t,e){
t.exports=function(t){var e=Object.assign({},t);this.render=function(){location.href=e.url,setTimeout((function(){e.onResult(new Error("Login aborted"))}),1e4)}}},function(t,e,r){"use strict"
;function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){
return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){
for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){a(t,e,r[e])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))
}return t}function a(t,e,r){return(e=f(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */c=function(){return t}
;var t={},e=Object.prototype,r=e.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value
},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,
enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function f(t,e,r,n){
var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:k(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{
type:"throw",arg:t}}}t.wrap=f;var p={};function d(){}function y(){}function v(){}var g={};l(g,a,(function(){return this}));var m=Object.getPrototypeOf,_=m&&m(m(L([])));_&&_!==e&&r.call(_,a)&&(g=_)
;var b=v.prototype=d.prototype=Object.create(g);function w(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){var i;o(this,"_invoke",{
value:function(o,a){function c(){return new e((function(i,c){!function o(i,a,c,u){var s=h(t[i],t,a);if("throw"!==s.type){var l=s.arg,f=l.value
;return f&&"object"==n(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(f).then((function(t){l.value=t,c(l)}),(function(t){
return o("throw",t,c,u)}))}u(s.arg)}(o,a,i,c)}))}return i=i?i.then(c,c):c()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){
if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=S(a,r);if(c){
if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)
}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=h(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}
"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",
e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg)
;if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),
e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),
2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],
t.forEach(E,this),this.reset(!0)}function L(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){
for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=v,
o(b,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=l(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){
var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,
l(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,
t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),l(b,s,"Generator"),
l(b,a,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){
for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,
this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),
!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg
;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}
for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc")
;if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{
if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){
var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null)
;var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg
;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},
finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),p}},catch:function(t){
for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},
delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function u(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){
return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function s(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){
u(i,n,o,a,c,"next",t)}function c(t){u(i,n,o,a,c,"throw",t)}a(void 0)}))}}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,
"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function f(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){
var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string")
;return"symbol"===n(e)?e:String(e)}function h(){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=p(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e)
;return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function p(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=g(t)););return t}function d(t,e){
return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1
;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}()
;return function(){var r,n=g(t);if(e){var o=g(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v(this,r)}}function v(t,e){
if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){
if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){
return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=r(2).AppClient,_=r(5),b=(r(0).AuthenticationError,
r(6)),w=r(12),x=r(11),k=location.href.startsWith("about:")&&window.frameElement?parent:window,S=new RegExp("uu.app.csrf=([^;]+)"),E=function(t){!function(t,e){
if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}
}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d(t,e)}(O,t);var e,r,n,o,a,u,f,p,v,w,E=y(O);function O(t,e,r,n){var o;return function(t,e){
if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,O),(o=E.call(this,t,e,r))._oauthClient=t,o._serviceName=e,o._redirectUri=r,o._appBaseUri=n,o._client=new m,
o._doOnlyLocalSessionCheck=!1,o}return e=O,(r=[{key:"restoreSession",value:(w=s(c().mark((function t(e,r){var n,o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:
return n=sessionStorage.getItem("uu_app_oidc_auth_cb"),sessionStorage.removeItem("uu_app_oidc_auth_cb"),t.next=4,this._restoreSessionViaAppSession(e,r);case 4:
if((o=t.sent)&&this._assertConstraints(o.claims,e,n)||n){t.next=10;break}return t.next=9,this._resotreSessionViaIdpSession(e,r);case 9:o=t.sent;case 10:if(o){t.next=16;break}return t.next=13,
this._oauthClient.getMetadata();case 13:return t.next=15,_.getClientId(this._serviceName);case 15:this._throwInteractionRequired();case 16:return t.abrupt("return",o);case 17:case"end":return t.stop()
}}),t,this)}))),function(t,e){return w.apply(this,arguments)})},{key:"checkSession",value:(v=s(c().mark((function t(e){var r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:
if(!this._doOnlyLocalSessionCheck){t.next=4;break}return t.abrupt("return",this._isSessionValid()?"unchanged":"changed");case 4:return t.next=6,h(g(O.prototype),"checkSession",this).call(this,e)
;case 6:"unknown"===(r=t.sent)&&(this._logger.warn("Switching global session check to application session check due to blocked thirdparty cookies."),this._doOnlyLocalSessionCheck=!0,r="unchanged")
;case 8:return t.abrupt("return",r);case 9:case"end":return t.stop()}}),t,this)}))),function(t){return v.apply(this,arguments)})},{key:"refreshSession",value:(p=s(c().mark((function t(e){
var r,n,o,i,a,u=arguments;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u.length>1&&void 0!==u[1]&&u[1],this._isSessionValid()||this._throwInteractionRequired(),r=Date.now(),
t.prev=3,t.next=6,this._client.post(this._appBaseUri+"oidc/extendSession");case 6:n=t.sent.data,t.next=16;break;case 9:if(t.prev=9,t.t0=t.catch(3),!t.t0.status||401!==t.t0.status){t.next=15;break}
this._throwInteractionRequired(t.t0),t.next=16;break;case 15:throw t.t0;case 16:return this._assertConstraints(n,e,!0),o=r+1e3*n.session_info.session_expires_in,i=n.session_info.session_state,
a=n.session_info.client_id,delete n.session_info,delete n.uuAppErrorMap,t.abrupt("return",{claims:n,globalSessionExpiresAt:o,globalSessionState:i,clientId:a});case 23:case"end":return t.stop()}
}),t,this,[[3,9]])}))),function(t){return p.apply(this,arguments)})},{key:"getCallToken",value:(f=s(c().mark((function t(e){var r,n,o,i=arguments;return c().wrap((function(t){
for(;;)switch(t.prev=t.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:null,t.next=3,this._client.post(this._appBaseUri+"oidc/grantCallToken",{scope:r});case 3:return n=t.sent.data,
o=Date.now()+1e3*n.expires_in,t.abrupt("return",{idToken:n.id_token,accessToken:n.access_token,expireAt:o});case 6:case"end":return t.stop()}}),t,this)}))),function(t){return f.apply(this,arguments)})
},{key:"_restoreSessionViaAppSession",value:(u=s(c().mark((function t(e,r){var n,o,i,a,u,s,l,f;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:
if(this._logger.debug("Trying to restore session based on existing application session."),this._isSessionValid()){t.next=4;break}return this._logger.debug("Application session not found."),
t.abrupt("return",null);case 4:return n=Date.now(),t.prev=5,t.next=8,this._client.get(this._appBaseUri+"oidc/introspect",{_:Date.now()});case 8:o=t.sent.data,t.next=15;break;case 11:return t.prev=11,
t.t0=t.catch(5),this._logger.debug("Restoring of session based on existing application session failed.",t.t0),t.abrupt("return",null);case 15:if(o&&o.session_info){t.next=18;break}
return this._logger.debug("Application session not found."),t.abrupt("return",null);case 18:return i=n+1e3*o.session_info.session_expires_in,a=o.session_info.session_state,u=o.session_info.client_id,
delete o.session_info,delete o.uuAppErrorMap,s=e.acrValues||this._defaultAcrValues,l=e.maxAge||this._defaultMaxAge,(f=sessionStorage.getItem("uu_app_oidc_auth_ctx"))&&(f=JSON.parse(f),
sessionStorage.removeItem("uu_app_oidc_auth_ctx")),t.abrupt("return",{claims:o,idToken:null,accessToken:null,authenticationContext:f,globalSessionExpiresAt:i,globalSessionState:a,clientId:u,scope:r,
acrValues:s,maxAge:l});case 28:case"end":return t.stop()}}),t,this,[[5,11]])}))),function(t,e){return u.apply(this,arguments)})},{key:"_resotreSessionViaIdpSession",
value:(a=s(c().mark((function t(e,r){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._logger.debug("Restoring session by redirection to configured identity provider."),
t.next=3,this._oauthClient.getMetadata();case 3:return e=i(i({},e),{},{usePopup:!1,prompt:"none",noIframe:!0}),"forced"===b.getRestoreSessionOnLoad()&&delete e.prompt,
sessionStorage.setItem("uu_app_oidc_auth_referrer",document.referrer),t.abrupt("return",this.authenticate(e,r));case 7:case"end":return t.stop()}}),t,this)}))),function(t,e){
return a.apply(this,arguments)})},{key:"_assertConstraints",value:(o=s(c().mark((function t(e,r,n){var o,i;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:
if(!(o=r.acrValues||this._defaultAcrValues)||o.includes(e.acr)){t.next=7;break}if(!n){t.next=6;break}this._throwInteractionRequired(),t.next=7;break;case 6:return t.abrupt("return",!1);case 7:
if(!((i=r.maxAge||this._defaultMaxAge)&&1e3*(e.auth_time+i)<Date.now())){t.next=14;break}if(!n){t.next=13;break}this._throwInteractionRequired(),t.next=14;break;case 13:return t.abrupt("return",!1)
;case 14:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return o.apply(this,arguments)})},{key:"_isSessionValid",value:function(){var t=(S.exec(k.document.cookie)||[])[1];if(!t)return!1
;var e=t.split(".");return 3!==e.length||1e3*Number(e[0])>Date.now()}},{key:"_throwInteractionRequired",value:function(){
var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=new x("Authentication Request cannot be completed without displaying a user interface for End-User interaction.",t)
;throw e.code="interaction_required",e}}])&&l(e.prototype,r),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),O}(w);t.exports=E},function(t,e,r){"use strict";function n(t){
return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){
return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */o=function(){return t}
;var t={},e=Object.prototype,r=e.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value
},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,
enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function f(t,e,r,n){
var o=e&&e.prototype instanceof d?e:d,a=Object.create(o.prototype),c=new P(n||[]);return i(a,"_invoke",{value:k(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{
type:"throw",arg:t}}}t.wrap=f;var p={};function d(){}function y(){}function v(){}var g={};l(g,c,(function(){return this}));var m=Object.getPrototypeOf,_=m&&m(m(L([])));_&&_!==e&&r.call(_,c)&&(g=_)
;var b=v.prototype=d.prototype=Object.create(g);function w(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){var o;i(this,"_invoke",{
value:function(i,a){function c(){return new e((function(o,c){!function o(i,a,c,u){var s=h(t[i],t,a);if("throw"!==s.type){var l=s.arg,f=l.value
;return f&&"object"==n(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(f).then((function(t){l.value=t,c(l)}),(function(t){
return o("throw",t,c,u)}))}u(s.arg)}(i,a,o,c)}))}return o=o?o.then(c,c):c()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){
if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=S(a,r);if(c){
if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)
}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=h(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}
"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",
e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg)
;if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),
e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),
2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],
t.forEach(E,this),this.reset(!0)}function L(t){if(t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){
for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=v,
i(b,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:y,configurable:!0}),y.displayName=l(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){
var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,
l(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,
t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),l(b,s,"Generator"),
l(b,c,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){
for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,
this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),
!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg
;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}
for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc")
;if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{
if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){
var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null)
;var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg
;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},
finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),p}},catch:function(t){
for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},
delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function i(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){
return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function a(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),
Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o
;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===n(a)?a:String(a)),o)}var i,a}function c(t,e){
return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1
;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}()
;return function(){var r,n=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return s(this,r)}}function s(t,e){
if(e&&("object"===n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){
if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){
return t.__proto__||Object.getPrototypeOf(t)})(t)}var f=r(0).AuthenticationError,h=r(5),p=function(t){!function(t,e){
if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}
}),Object.defineProperty(t,"prototype",{writable:!1}),e&&c(t,e)}(d,t);var e,r,n,s,l,p=u(d);function d(t,e,r){return function(t,e){
if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),p.call(this,t,e,r,null)}return e=d,(r=[{key:"authenticate",value:(s=o().mark((function t(e){
var r,n,i,a,c,u,s,l=arguments;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=l.length>1&&void 0!==l[1]?l[1]:null,n=e.os8Token){t.next=4;break}
throw new f("Authentication using Os8Flow requires option 'os8Token' passed to the authentication call.");case 4:return t.next=6,h.getClientId(this._serviceName);case 6:return i=t.sent,a={
subject_token:n,response_type:"id_token",client_id:i,redirect_uri:this._redirectUri},c=Object.keys(a).filter((function(t){return null!=a[t]})).map((function(t){
return encodeURIComponent(t)+"="+encodeURIComponent(a[t]+"")})),u=this._oauthClient.getServiceUri().replace(/\/*$/,"/")+"exchangeOs8Token?"+c.join("&"),t.next=12,this.sendRequest(u);case 12:
return s=t.sent,t.next=15,this._processAuthResponse(s,null,null,r,null,null,i);case 15:return t.abrupt("return",t.sent);case 16:case"end":return t.stop()}}),t,this)})),l=function(){
var t=this,e=arguments;return new Promise((function(r,n){var o=s.apply(t,e);function a(t){i(o,r,n,a,c,"next",t)}function c(t){i(o,r,n,a,c,"throw",t)}a(void 0)}))},function(t){
return l.apply(this,arguments)})}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),d}(r(8));t.exports=p},function(t,e,r){"use strict";function n(t){
return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){
return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */o=function(){return t}
;var t={},e=Object.prototype,r=e.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value
},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,
enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function f(t,e,r,n){
var o=e&&e.prototype instanceof d?e:d,a=Object.create(o.prototype),c=new P(n||[]);return i(a,"_invoke",{value:k(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{
type:"throw",arg:t}}}t.wrap=f;var p={};function d(){}function y(){}function v(){}var g={};l(g,c,(function(){return this}));var m=Object.getPrototypeOf,_=m&&m(m(L([])));_&&_!==e&&r.call(_,c)&&(g=_)
;var b=v.prototype=d.prototype=Object.create(g);function w(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){var o;i(this,"_invoke",{
value:function(i,a){function c(){return new e((function(o,c){!function o(i,a,c,u){var s=h(t[i],t,a);if("throw"!==s.type){var l=s.arg,f=l.value
;return f&&"object"==n(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(f).then((function(t){l.value=t,c(l)}),(function(t){
return o("throw",t,c,u)}))}u(s.arg)}(i,a,o,c)}))}return o=o?o.then(c,c):c()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){
if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=S(a,r);if(c){
if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)
}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=h(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}
"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",
e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg)
;if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),
e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),
2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],
t.forEach(E,this),this.reset(!0)}function L(t){if(t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){
for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=v,
i(b,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:y,configurable:!0}),y.displayName=l(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){
var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,
l(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,
t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),l(b,s,"Generator"),
l(b,c,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){
for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,
this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),
!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg
;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}
for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc")
;if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{
if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){
var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null)
;var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg
;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},
finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),p}},catch:function(t){
for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},
delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function i(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){
return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function a(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),
Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default");if("object"!==n(o))return o
;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===n(a)?a:String(a)),o)}var i,a}var c=r(3).LoggerFactory,u=function(){
function t(e,r,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._authnFlow=e,this._enabled=!0,this._sessionCheckInterval=r,
this._clientId=n,this._getSessionStateFn=o,this._listeners=[],this._unknownStateListeners=[],this._notifyUnknownState=!0,this._logger=c.get("uuapp.oidc.internal.SessionStateChangeNotifier"),
this._stateCheckInterval=setInterval(this._checkState.bind(this),1e3*this._sessionCheckInterval)}var e,r,n,u,s;return e=t,(r=[{key:"enable",value:function(){this._enabled=!0}},{key:"disable",
value:function(){this._enabled=!1}},{key:"onStateChange",value:function(t){var e=this;return this._listeners.push(t),function(){var r=e._listeners.indexOf(t);return-1!=r&&e._listeners.splice(r,1),
-1!=r}}},{key:"onStateUnknown",value:function(t){var e=this;return this._unknownStateListeners.push(t),function(){var r=e._unknownStateListeners.indexOf(t)
;return-1!=r&&e._unknownStateListeners.splice(r,1),-1!=r}}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,this._stateCheckInterval&&clearInterval(this._stateCheckInterval),
delete this._stateCheckInterval,this._listeners=[],this._unknownStateListeners=[],this._notifyUnknownState=!0)}},{key:"_checkState",value:(u=o().mark((function t(){var e,r,n
;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._enabled){t.next=2;break}return t.abrupt("return");case 2:if(e=this._getSessionStateFn()){t.next=5;break}
return t.abrupt("return");case 5:return r=this._clientId+" "+e,this._logger.debug("Checking session state."),t.next=9,this._authnFlow.checkSession(r);case 9:
"changed"===(n=t.sent)?(this._logger.debug("Received session state change notification (message: '".concat(n,"').")),this._notifyUnknownState=!0,this._listeners.forEach((function(t){return t()
}))):"unknown"===n?(this._logger.debug("Received session state change notification (message: '".concat(n,"').")),
this._notifyUnknownState&&(this._logger.debug("Propagating info about '".concat(n,"' session state.")),this._unknownStateListeners.forEach((function(t){return t()})),
this._notifyUnknownState=!1)):this._notifyUnknownState=!0;case 11:case"end":return t.stop()}}),t,this)})),s=function(){var t=this,e=arguments;return new Promise((function(r,n){var o=u.apply(t,e)
;function a(t){i(o,r,n,a,c,"next",t)}function c(t){i(o,r,n,a,c,"throw",t)}a(void 0)}))},function(){return s.apply(this,arguments)})}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{
writable:!1}),t}();t.exports=u},function(t,e,r){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){
return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){
for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){a(t,e,r[e])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))
}return t}function a(t,e,r){return(e=f(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function c(){
"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */c=function(){return t}
;var t={},e=Object.prototype,r=e.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value
},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,
enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function f(t,e,r,n){
var i=e&&e.prototype instanceof d?e:d,a=Object.create(i.prototype),c=new P(n||[]);return o(a,"_invoke",{value:k(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{
type:"throw",arg:t}}}t.wrap=f;var p={};function d(){}function y(){}function v(){}var g={};l(g,a,(function(){return this}));var m=Object.getPrototypeOf,_=m&&m(m(L([])));_&&_!==e&&r.call(_,a)&&(g=_)
;var b=v.prototype=d.prototype=Object.create(g);function w(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){var i;o(this,"_invoke",{
value:function(o,a){function c(){return new e((function(i,c){!function o(i,a,c,u){var s=h(t[i],t,a);if("throw"!==s.type){var l=s.arg,f=l.value
;return f&&"object"==n(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(f).then((function(t){l.value=t,c(l)}),(function(t){
return o("throw",t,c,u)}))}u(s.arg)}(o,a,i,c)}))}return i=i?i.then(c,c):c()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){
if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=S(a,r);if(c){
if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)
}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=h(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}
"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",
e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg)
;if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),
e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),
2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],
t.forEach(E,this),this.reset(!0)}function L(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){
for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=v,
o(b,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:y,configurable:!0}),y.displayName=l(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){
var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,
l(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,
t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),l(b,s,"Generator"),
l(b,a,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){
for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,
this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),
!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg
;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}
for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc")
;if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{
if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){
var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null)
;var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg
;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},
finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),p}},catch:function(t){
for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},
delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function u(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){
return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function s(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){
u(i,n,o,a,c,"next",t)}function c(t){u(i,n,o,a,c,"throw",t)}a(void 0)}))}}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,
"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function f(t){var e=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){
var o=r.call(t,e||"default");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string")
;return"symbol"===n(e)?e:String(e)}
var h=r(1),p=h.Config,d=h.Digest,y=r(3).LoggerFactory,v=r(10),g=r(42),m=r(7),_="uu_app_oidc_providers_",b=["none","low","medium","high","veryHigh"],w=["none","low","standard","high","veryHigh"],x=y.get("uuapp.oidc.Session"),k=function(t,e){
var r=t.toString().split("/"),n=e.toString().split("/");if(n.length>r.length)return!1;for(var o=0;o<n.length;o++)if(n[o]!==r[o])return!1;return!0},S=function(){function t(){!function(t,e){
if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"from",value:function(t,e,r,n,o){
return t?(t._appBaseUri=m.appBaseUri.replace(/\/$/,""),t._authnCtx=e||null,t.getAuthenticationContext=function(){return this._authnCtx}.bind(t),t._expiresAt=r||null,t.getExpiresAt=function(){
return this._expiresAt}.bind(t),t._state=n||null,t.getState=function(){return this._state}.bind(t),Object.defineProperty(t,"_authnService",{get:function(){return o},enumerable:!1}),
t._origGetCallTokenScope=t.getCallTokenScope.bind(t),t.getCallTokenScope=function(){
var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}
;return t?k(t,this._appBaseUri)?this._appBaseUri:this._origGetCallTokenScope(t,e):null}.bind(t),t.getCallToken=s(c().mark((function e(){var r,n,o,i,a,u=arguments;return c().wrap((function(e){
for(;;)switch(e.prev=e.next){case 0:if(r=u.length>0&&void 0!==u[0]?u[0]:null,n=u.length>1&&void 0!==u[1]?u[1]:{},null!=r&&k(r,this._appBaseUri)){e.next=8;break}return e.next=5,g.getCallToken(t,r,n)
;case 5:o=e.sent,e.next=11;break;case 8:(i=n?n.callTokenType:null)||(a="".concat(this._configPrefix,"call_token_type"),i=p.getString(a)),
"idToken"===i?o=this._idToken:"accessToken"===i?o=this._accessToken:i||(o=this._idToken||this._accessToken);case 11:if(!o){e.next=20;break}if(!0!==(!!n&&n.excludeAuthenticationType)){e.next=17;break}
return e.abrupt("return",o);case 17:return e.abrupt("return","Bearer ".concat(o));case 18:e.next=21;break;case 20:return e.abrupt("return",null);case 21:case"end":return e.stop()}}),e,this)
}))).bind(t),t.actAs=function(){var t=s(c().mark((function t(e){var r,n,o=arguments;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:null,
n=o.length>2&&void 0!==o[2]?o[2]:{},null==r||"string"==typeof r||Array.isArray(r)||(n=r,r=null),delete(n=i({},n)).prompt,n.loginHint=e,null==n.usePopup&&(n.usePopup=!1),this.removeFromCache(),
t.next=10,this._authnService.authenticate(n,r);case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),
t.close=s(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.removeFromCache(),!this._authenticated){e.next=15;break}return e.prev=2,e.next=5,
t._authnService._authnFlow.endSession(t);case 5:"function"==typeof this._onCloseListener&&this._onCloseListener(this),t._authenticated=!1,t._idToken=null,t._accessToken=null,e.next=15;break;case 11:
e.prev=11,e.t0=e.catch(2),x.warn("Logout finished but session might not be cancelled - server responded with unexpected callback.",e.t0),t._authnService.checkSession();case 15:case"end":
return e.stop()}}),e,this,[[2,11]])}))).bind(t),t.matches=function(t,e){var r,n;if(t){var o=this._supportedAcrValues,i=t.toString()
;o.includes("medium")?i=i.replace("standard","medium"):o.includes("standard")&&(i=i.replace("medium","standard"));var a=i.split(" "),c=[];a.forEach((function(t){var e=Number(t)
;isNaN(e)&&((e=o.indexOf(t))<0&&(e=w.indexOf(t)),e<0&&(e=b.indexOf(t))),e>=0&&c.push(e)})),r=Math.min.apply(Math,c)}e&&(n=e);try{return this.assertTrustiness({minAuthenticationLevelOfAssurance:r,
maxAuthenticationAge:n}),!0}catch(t){return!1}}.bind(t),t.storeToCache=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e={attributes:this._attributes,
acrValues:this._supportedAcrValues,idToken:this._idToken,acccessToken:this._accessToken,authnCtx:this._authnCtx,expiresAt:this._expiresAt,state:this._state,authConstraints:this._authConstraints,
userAgent:d.sha1(navigator.userAgent)},r="".concat(_).concat(this._serviceName,"_session");t&&(r+="_".concat(d.sha1(t))),sessionStorage.setItem(r,JSON.stringify(e))}.bind(t),
t.removeFromCache=function(){var t="".concat(_).concat(this._serviceName,"_session");Object.keys(sessionStorage).forEach((function(e){e&&e.toString().startsWith(t)&&sessionStorage.removeItem(e)}))
}.bind(t),t):t}},{key:"loadFromCache",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e.getServiceName(),o="".concat(_).concat(n,"_session")
;r&&(o+="_".concat(d.sha1(r)));var i=sessionStorage.getItem(o);if(!i)return null;try{i=JSON.parse(i)
;var a=Date.now()/1e3,c=i.attributes.exp,u=p.getNumber("uu_app_oidc_providers_"+n+"_token_refresh_leeway");if(null==u&&(u=300),
i.expiresAt&&i.expiresAt<=a||c&&c-u<=a)return x.warn("Cached session for ".concat(n," is expired.")),sessionStorage.removeItem(o),null
;if(i.userAgent!=d.sha1(navigator.userAgent))return x.warn("UserAgent does not match on cached session for service ".concat(n,".")),sessionStorage.removeItem(o),null
;var s=e._oauthClient,l=new v(n,s,i.acrValues,i.attributes,i.idToken,i.acccessToken);return l._authConstraints=i.authConstraints,t.from(l,i.authnCtx,i.expiresAt,i.state,e)}catch(t){
return x.error("Unable to restore cached session for ".concat(n,"."),t),null}}}],(r=null)&&l(e.prototype,r),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports=S
},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){
return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */o=function(){return t}
;var t={},e=Object.prototype,r=e.hasOwnProperty,i=Object.defineProperty||function(t,e,r){t[e]=r.value
},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,
enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function f(t,e,r,n){
var o=e&&e.prototype instanceof d?e:d,a=Object.create(o.prototype),c=new P(n||[]);return i(a,"_invoke",{value:k(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{
type:"throw",arg:t}}}t.wrap=f;var p={};function d(){}function y(){}function v(){}var g={};l(g,c,(function(){return this}));var m=Object.getPrototypeOf,_=m&&m(m(L([])));_&&_!==e&&r.call(_,c)&&(g=_)
;var b=v.prototype=d.prototype=Object.create(g);function w(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){var o;i(this,"_invoke",{
value:function(i,a){function c(){return new e((function(o,c){!function o(i,a,c,u){var s=h(t[i],t,a);if("throw"!==s.type){var l=s.arg,f=l.value
;return f&&"object"==n(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,c,u)}),(function(t){o("throw",t,c,u)})):e.resolve(f).then((function(t){l.value=t,c(l)}),(function(t){
return o("throw",t,c,u)}))}u(s.arg)}(i,a,o,c)}))}return o=o?o.then(c,c):c()}})}function k(t,e,r){var n="suspendedStart";return function(o,i){
if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return T()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=S(a,r);if(c){
if(c===p)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)
}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=h(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}
"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function S(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",
e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var o=h(n,t.iterator,e.arg)
;if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,p;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),
e.delegate=null,p):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),
2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],
t.forEach(E,this),this.reset(!0)}function L(t){if(t){var e=t[c];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){
for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return y.prototype=v,
i(b,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:y,configurable:!0}),y.displayName=l(v,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){
var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,
l(t,s,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(x.prototype),l(x.prototype,u,(function(){return this})),t.AsyncIterator=x,
t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),l(b,s,"Generator"),
l(b,c,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){
for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=L,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,
this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),
!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg
;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}
for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc")
;if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{
if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){
var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null)
;var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg
;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},
finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),p}},catch:function(t){
for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},
delegateYield:function(t,e,r){return this.delegate={iterator:L(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},t}function i(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){
return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function a(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){
i(a,n,o,c,u,"next",t)}function u(t){i(a,n,o,c,u,"throw",t)}c(void 0)}))}}function c(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,
"value"in o&&(o.writable=!0),Object.defineProperty(t,(i=o.key,a=void 0,a=function(t,e){if("object"!==n(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,e||"default")
;if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(i,"string"),"symbol"===n(a)?a:String(a)),o)}var i,a}
var u=r(1).Config,s=r(3).LoggerFactory,l=function(){function t(e,r){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),
this._serviceName=e.getServiceName(),this._callUri=r,this._configPrefix="".concat("uu_app_oidc_providers_").concat(this._serviceName,"_"),
this._tokenTimeLeeway=u.getNumber("".concat(this._configPrefix,"token_time_leeway"),!1)||300,this._logger=s.get("uuapp.oidc.ExternalCallTokenProvider"),this._authnFlow=e._authnService._authnFlow,
this._runningPromise=null,this._idToken=null,this._accessToken=null,this._expireAt=null,e._authnService.addListener("sessionChanged",(function(){n._idToken=null,n._accessToken=null,n._expireAt=null}))
}var e,r,n,i,l;return e=t,r=[{key:"_getCallToken",value:(l=a(o().mark((function t(){var e,r,n,i,a,c,s,l,f,h,p=arguments;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:
if(e=p.length>0&&void 0!==p[0]?p[0]:{},!this._isExpired()){t.next=24;break}return this._runningPromise||(this._logger.debug("Requesting new call token for ".concat(this._callUri)),r={prompt:"none",
usePopup:!1},this._authnFlow.getCallToken?this._runningPromise=this._authnFlow.getCallToken(r,this._callUri):this._runningPromise=this._authnFlow.authenticate(r,this._callUri)),t.prev=3,t.next=6,
this._runningPromise;case 6:n=t.sent,i=n.idToken,a=n.accessToken,c=n.claims,s=n.expireAt,this._idToken=i,this._accessToken=a,this._expireAt=s||1e3*c.exp,
this._logger.debug("Call token for ".concat(this._callUri," received")),t.next=21;break;case 17:return t.prev=17,t.t0=t.catch(3),
this._logger.error("Unable to get call token for ".concat(this._callUri),t.t0),t.abrupt("return",null);case 21:return t.prev=21,this._runningPromise=null,t.finish(21);case 24:return l=null,
(f=e?e.callTokenType:null)||(h="".concat(this._configPrefix,"call_token_type"),f=u.getString(h)),
"idToken"===f?l=this._idToken:"accessToken"===f?l=this._accessToken:f||(l=this._idToken||this._accessToken),t.abrupt("return",l);case 29:case"end":return t.stop()}}),t,this,[[3,17,21,24]])}))),
function(){return l.apply(this,arguments)})},{key:"_isExpired",value:function(){return!this._expireAt||Date.now()>=this._expireAt-2*this._tokenTimeLeeway}}],n=[{key:"getCallToken",
value:(i=a(o().mark((function t(e,r,n){var i,a,c;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((i=e.getServiceName())&&e._oauthClient){t.next=3;break}
return t.abrupt("return",null);case 3:return r=r?r.toString():"",a="".concat(i,"|").concat(r),(c=this._providers[a])||(c=new this(e,r),this._providers[a]=c),t.abrupt("return",c._getCallToken(n))
;case 8:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return i.apply(this,arguments)})}],r&&c(e.prototype,r),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}()
;l._providers={},t.exports=l},function(t,e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){
return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){
var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function o(t,e,r){
return(e=a(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,
n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,a(n.key),n)}}function a(t){var e=function(t,e){if("object"!==r(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){
var o=n.call(t,e||"default");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string")
;return"symbol"===r(e)?e:String(e)}var c=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,a;return e=t,a=[{
key:"wrapClass",value:function(e,r){var n;return Object.defineProperty(e,"currentSession",{get:function(){return n||(n=t.initG01Session(e,r)),n}}),Object.defineProperty(e,"initComplete",{
get:function(){return r._onPageLoadFinished}}),Object.defineProperty(e,"initPromise",{get:function(){return r._onPageLoad().then((function(o){return n||(n=t.initG01Session(e,r)),n}))}}),e}},{
key:"initG01Session",value:function(t,e){var r=t._createEmptySession();Object.defineProperty(r,"initComplete",{get:function(){return e._onPageLoadFinished}}),Object.defineProperty(r,"initPromise",{
get:function(){return e._onPageLoad().then((function(){return r}))}});var i=null,a=function(){return i||e.getCurrentSession()};r.getIdentity=function(){var t=a(),e=t.getIdentity()
;return e?(e.id=t.getAttribute("sub"),e.name=e.getName(),e.email=t.getAttribute("email"),e.uuIdentity=e.getUuIdentity(),e.levelOfAssurance=e.getLevelOfAssurance(),
e.loginLevelOfAssurance=t.getAuthenticationLevelOfAssurance(),e):e},r.getClaims=function(){return a()._attributes},r.getCallToken=function(){
var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof t||Array.isArray(t))return a().getCallToken(t,e)
;var r=a();return{token:r._idToken||r._accessToken,tokenType:r._idToken?"Bearer":null}},r.getCallTokenScope=function(){
var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a().getCallTokenScope(t,e)},r.isExpiring=function(){
return e.isSessionExpiring()},r.isAuthenticated=function(){return a().isAuthenticated()},r.login=function(t){var i=function(t){for(var e=1;e<arguments.length;e++){
var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){o(t,e,r[e])
})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))
}return t}({},t),a={};return i.access_token&&"urn:ietf:params:oauth:token-type:jwt-uuos8"===i.token_type_hint&&(a={os8Token:i.access_token},delete i.access_token,delete i.token_type_hint),
Object.assign(a,i),e.authenticate(a).then((function(){return r}))},r.logout=function(){return a().close()};var c={};r.addListener=function(n,o){"identityChange"===n&&(n="sessionChanged")
;var a=e.addListener(n,(function(e){var n=e.type,a=e.data,c=i;a instanceof t&&(i=a);try{var u=n,s=a instanceof t?r:a;return"sessionChanged"===n&&(u="identityChange",s=r.getIdentity()),o({type:u,data:s
})}finally{i=c}})),u=c[n];return u||(u=c[n]=new Map),u.set(o,a),a},r.removeListener=function(t,e){"identityChange"===t&&(t="sessionChanged");var r=c[t],n=r?r.get(e):null;return!!n&&(r.delete(e),n())}
;var u=new Map;return r.addIdentityChangeListener=function(t){var e=r.addListener("identityChange",(function(e){return t(e.data)}));return u.set(t,e),e},r.removeIdentityChangeListener=function(t){
var e=u.get(t);return!!e&&(u.delete(t),e())},r.getAuthenticationContext=function(){return a().getAuthenticationContext()},r._unwrap=function(){return a()},r}}],(r=null)&&i(e.prototype,r),a&&i(e,a),
Object.defineProperty(e,"prototype",{writable:!1}),t}();t.exports=c}])}));